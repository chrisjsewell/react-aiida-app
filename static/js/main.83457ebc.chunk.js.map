{"version":3,"sources":["aiidaClient.ts","styles.ts","icons.tsx","PageHome.tsx","nodeTree.tsx","utils.ts","PageNodeExplorer.tsx","PageProvenanceGraph.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["queryClient","QueryClient","defaultRestUrl","urlPattern","RegExp","uuidPattern","AiidaSettingsContext","React","createContext","baseUrl","a","fetch","response","ok","nodeType","page","perPage","totalCount","parseInt","headers","get","json","responseJson","nodes","data","uuid","test","TypeError","undefined","Object","values","repo_list","getNodeIncoming","incoming","getNodeOutgoing","outgoing","drawerWidth","useStyles","makeStyles","theme","createStyles","root","flexGrow","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","width","enteringScreen","menuButton","marginRight","spacing","title","inputRestUrlIcon","inputRestUrl","minWidth","inputRestUrlText","color","hide","display","overflowAuto","overflow","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","breakpoints","up","toolbar","alignItems","justifyContent","padding","mixins","mainGrid","paddingTop","paddingLeft","paddingRight","paper","palette","text","secondary","formControl","margin","InlineIcon","verticalAlign","padTop","AiiDAIcon200","height","viewBox","xmlns","preserveAspectRatio","fill","id","y","x","transform","d","RocketIcon","SvgIcon","fillRule","GitBranchIcon","PageHome","classes","Grid","container","className","item","xs","sm","md","Paper","variant","IntroBox","GettingStartedBox","DetailedBox","href","Alert","severity","language","type","tree","maxWidth","backgroundColor","background","refresh","pagination","paddingBottom","listChip","marginBottom","float","nested1","nested2","initialMouseState","mouseX","mouseY","AiidaNodeTree","nodePrefix","useState","setPage","aiidaSettings","useContext","result","useQuery","getNodes","enabled","element","CircularProgress","pages","isIdle","icon","Math","ceil","List","component","aria-label","map","value","AiidaTreeElement","pk","header","attributes","process_label","elementName","node_type","split","slice","join","info","mtime","process_type","tooltip","procLabel","procState","process_state","procExit","exit_status","isError","error","message","updateInfo","dataUpdatedAt","date","Date","toLocaleString","Button","startIcon","onClick","refetch","Pagination","count","onChange","event","ElementIconMap","props","key","open","setOpen","contextPosition","setContextPosition","handleContextClose","preventDefault","stopPropagation","Tooltip","Fragment","includes","Chip","label","ListItem","button","onContextMenu","clientX","clientY","nested","ListItemAvatar","Avatar","ListItemText","primary","keepMounted","onClose","anchorReference","anchorPosition","top","left","MenuItem","copy","AiidaNodeChildren","nodeUUID","Divider","light","openRepo","setOpenRepo","openIncoming","setOpenIncoming","openOutgoing","setOpenOutgoing","Collapse","in","timeout","disablePadding","ListItemIcon","mountOnEnter","AiidaRepoList","AiidaLinkIncomingList","AiidaLinkOutgoingList","getNodeRepoList","name","link_type","toUpperCase","link_label","useLocalStorage","initialValue","window","localStorage","getItem","JSON","parse","console","log","storedValue","setStoredValue","valueToStore","Function","setItem","stringify","PageNodeExplorer","setnodePrefix","nodeFieldsUUID","setnodeFieldsUUID","direction","Accordion","defaultExpanded","AccordionSummary","expandIcon","AccordionDetails","NodeExplorerIntroduction","NodeExplorerFilters","NodeExplorerAttributes","nodePrefixesDefault","getNodeStatistics","nodePrefixes","types","FormControl","InputLabel","Select","labelId","target","entries","sort","getNode","view","src","collapseStringsAfterLength","isFetching","TextField","helperText","fullWidth","PageProvenanceGraph","rootUUID","setrootUUID","dagMode","setdagMode","dagLevelDistance","setdagLevelDistance","ProvenanceGraphIntroduction","Typography","gutterBottom","Slider","defaultValue","aria-labelledby","valueLabelDisplay","step","marks","min","max","AiidaProvenanceGraph","fgRef","useRef","resultIncoming","resultOutgoing","useEffect","fg","current","d3Force","forceCollide","links","push","node","createNodeData","size","ref","graphData","nodeCanvasObject","linkDirectionalArrowLength","linkDirectionalArrowRelPos","pop","ctx","globalScale","fontSize","font","bckgDimensions","measureText","n","textAlign","textBaseline","strokeStyle","fillColor","fillStyle","fillRect","strokeRect","fillText","__bckgDimensions","ListItemLink","to","location","useLocation","renderLink","useMemo","forwardRef","itemProps","selected","pathname","App","showDevTools","useTheme","setDrawerOpen","restUrlBase","setRestUrlBase","QueryClientProvider","client","AppBar","position","clsx","Toolbar","IconButton","edge","RestUrlConnection","url","autoComplete","InputProps","Drawer","Provider","exact","path","NotFound","initialIsOpen","isConnected","reportWebVitals","onPerfEntry","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.83457ebc.chunk.js","sourcesContent":["import React from 'react';\nimport { QueryClient } from 'react-query'\n\nexport const queryClient = new QueryClient()\nexport const defaultRestUrl = \"http://127.0.0.1:5000/api/v4\"\n// TODO move validation to aiidaClient functions?\nexport const urlPattern = new RegExp('^https?:\\\\/\\\\/[^\\\\?]+$')\nexport const uuidPattern = new RegExp('^[-a-zA-Z0-9]+$')\n\nexport const AiidaSettingsContext = React.createContext({baseUrl: defaultRestUrl} as {baseUrl: null | string})\n\nexport interface IAiidaRestResponse {\n    // The base attributes for the rest response\n    data: any\n    id: null\n    method: \"GET\" | \"POST\"\n    path: string\n    query_string: string\n    resource_type: string\n    url: string\n    url_root: string\n}\n\nexport interface IAiidaRestNode {\n    ctime: string\n    full_type: string\n    id: number\n    label: string\n    mtime: string\n    node_type: string\n    process_type: string\n    user_id: number\n    uuid: string\n    attributes: {\n        process_state?:\n        | 'created'\n        | 'running'\n        | 'waiting'\n        | 'finished'\n        | 'excepted'\n        | 'killed'\n        process_label?: string\n        exit_status?: number\n    }\n}\n\nexport interface IAiidaRestResponseNode extends IAiidaRestResponse  {\n    data: { nodes: IAiidaRestNode[] }\n}\n\nexport interface IAiidaRestNodeStatistics {\n    total: number\n    ctime_by_day: {[key: string]: number}\n    types: {[key: string]: number}\n}\n\nexport interface IAiidaRestResponseNodeStatistics extends IAiidaRestResponse  {\n    data: IAiidaRestNodeStatistics\n}\n\n\nexport async function isConnected(baseUrl: string | null): Promise<boolean> {\n    if (baseUrl === null) {\n        return false\n    }\n    const response = await fetch(`${baseUrl}`)\n    return response.ok\n}\n\n\nexport async function getNodes(baseUrl: string | null, nodeType: string, page: number): Promise<null | { nodes: IAiidaRestNode[], totalCount: number, perPage: number }> {\n    if (baseUrl === null) {\n        return null\n    }\n    const perPage = 20\n    // TODO better url join?\n    const response = await fetch(`${baseUrl}/nodes/page/${page}?perpage=${perPage}&orderby=-mtime&node_type=like=%22${nodeType}%%22&attributes=true&attributes_filter=process_label,process_state,exit_status`)\n    // TODO handle errors\n    const totalCount = parseInt(response.headers.get('x-total-count') || '0')\n    const responseJson = (await response.json()) as IAiidaRestResponseNode\n    return { nodes: responseJson.data.nodes, totalCount, perPage }\n}\n\n\nexport async function getNodeStatistics(baseUrl: string | null): Promise<null | IAiidaRestNodeStatistics> {\n    if (baseUrl === null) {\n        return null\n    }\n    const response = await fetch(`${baseUrl}/nodes/statistics/`)\n    const responseJson = (await response.json()) as IAiidaRestResponseNodeStatistics\n    return responseJson.data\n}\n\nexport async function getNode(baseUrl: string | null, uuid: string | null): Promise<null | IAiidaRestNode> {\n    if (baseUrl === null || !uuid) {\n        return null\n    }\n    if (!uuidPattern.test(uuid)) {\n        throw new TypeError('UUID does not match required format')\n    }\n    const response = await fetch(`${baseUrl}/nodes/${uuid}?attributes=true&extras=true`)\n    const responseJson = (await response.json()) as IAiidaRestResponse\n    return responseJson.data?.nodes === undefined ? null : Object.values(responseJson.data?.nodes)[0] as IAiidaRestNode\n}\n\nexport interface IAiidaRestNodeRepoListItem {\n    name: string\n    type: \"FILE\" | \"DIRECTORY\"\n}\n\nexport interface IAiidaRestResponseNodeRepoList extends IAiidaRestResponse  {\n    data: { repo_list: {[key: number]: IAiidaRestNodeRepoListItem} }\n}\n\nexport async function getNodeRepoList(baseUrl: string | null, uuid: string | null): Promise<null | IAiidaRestNodeRepoListItem[]> {\n    if (baseUrl === null || !uuid) {\n        return null\n    }\n    if (!uuidPattern.test(uuid)) {\n        throw new TypeError('UUID does not match required format')\n    }\n    const response = await fetch(`${baseUrl}/nodes/${uuid}/repo/list`)\n    const responseJson = (await response.json()) as IAiidaRestResponseNodeRepoList\n    return responseJson.data?.repo_list === undefined ? null : Object.values(responseJson.data?.repo_list) as IAiidaRestNodeRepoListItem[]\n}\n\nexport interface IAiidaRestNodeLinkItem {\n    ctime: string\n    full_type: string\n    id: number\n    label: string\n    mtime: string\n    node_type: string\n    process_type: string\n    user_id: number\n    uuid: string\n    link_label: string\n    link_type: string\n}\n\nexport interface IAiidaRestResponseNodeIncoming extends IAiidaRestResponse  {\n    data: { incoming: {[key: number]: IAiidaRestNodeLinkItem} }\n}\n\nexport async function getNodeIncoming(baseUrl: string | null, uuid: string | null): Promise<null | IAiidaRestNodeLinkItem[]> {\n    if (baseUrl === null || !uuid) {\n        return null\n    }\n    if (!uuidPattern.test(uuid)) {\n        throw new TypeError('UUID does not match required format')\n    }\n    // TODO deal with pagination\n    const response = await fetch(`${baseUrl}/nodes/${uuid}/links/incoming/page/1`)\n    const responseJson = (await response.json()) as IAiidaRestResponseNodeIncoming\n    return responseJson.data?.incoming === undefined ? null : Object.values(responseJson.data?.incoming) as IAiidaRestNodeLinkItem[]\n}\n\nexport interface IAiidaRestResponseNodeOutgoing extends IAiidaRestResponse  {\n    data: { outgoing: {[key: number]: IAiidaRestNodeLinkItem} }\n}\n\nexport async function getNodeOutgoing(baseUrl: string | null, uuid: string | null): Promise<null | IAiidaRestNodeLinkItem[]> {\n    if (baseUrl === null || !uuid) {\n        return null\n    }\n    if (!uuidPattern.test(uuid)) {\n        throw new TypeError('UUID does not match required format')\n    }\n    // TODO deal with pagination\n    const response = await fetch(`${baseUrl}/nodes/${uuid}/links/outgoing/page/1`)\n    const responseJson = (await response.json()) as IAiidaRestResponseNodeOutgoing\n    return responseJson.data?.outgoing === undefined ? null : Object.values(responseJson.data?.outgoing) as IAiidaRestNodeLinkItem[]\n}\n","import { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\n\nconst drawerWidth = 240;\n\n// TODO use a spacer component instead of margins etc\n\nexport const useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      flexGrow: 1,\n    },\n    appBar: {\n      zIndex: theme.zIndex.drawer + 1,\n      transition: theme.transitions.create(['width', 'margin'], {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen,\n      }),\n    },\n    appBarShift: {\n      marginLeft: drawerWidth,\n      width: `calc(100% - ${drawerWidth}px)`,\n      transition: theme.transitions.create(['width', 'margin'], {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.enteringScreen,\n      }),\n    },\n    menuButton: {\n      marginRight: theme.spacing(2),\n    },\n    title: {\n      flexGrow: 1,\n    },\n    inputRestUrlIcon: {\n      marginRight: theme.spacing(1)\n    },\n    inputRestUrl: {\n      marginRight: theme.spacing(2),\n      minWidth: 200,\n    },\n    inputRestUrlText: {\n      color: \"white\"\n    },\n    hide: {\n      display: 'none',\n    },\n    overflowAuto: {\n      overflow: 'auto',\n    },\n    drawer: {\n      width: drawerWidth,\n      flexShrink: 0,\n      whiteSpace: 'nowrap',\n    },\n    drawerOpen: {\n      width: drawerWidth,\n      transition: theme.transitions.create('width', {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.enteringScreen,\n      }),\n    },\n    drawerClose: {\n      transition: theme.transitions.create('width', {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen,\n      }),\n      overflowX: 'hidden',\n      width: theme.spacing(7) + 1,\n      [theme.breakpoints.up('sm')]: {\n        width: theme.spacing(9) + 1,\n      },\n    },\n    toolbar: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'flex-end',\n      padding: theme.spacing(0, 1),\n      // necessary for content to be below app bar\n      ...theme.mixins.toolbar,\n    },\n    mainGrid: {\n      paddingTop: theme.spacing(1),\n      paddingLeft: theme.spacing(10),\n      paddingRight: theme.spacing(10)\n    },\n    paper: {\n      padding: theme.spacing(2),\n      color: theme.palette.text.secondary,\n    },\n    formControl: {\n        margin: theme.spacing(1),\n        minWidth: 200,\n    },\n    InlineIcon: {\n      verticalAlign: 'middle',\n      display: 'inline-flex',\n    },\n    padTop: {\n      paddingTop: theme.spacing(2),\n    }\n  }),\n);\n","// From https://primer.style/octicons\n\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport function AiiDAIcon200({width = 200, height = 200}): JSX.Element {\n    return (<svg width={width} height={height} viewBox=\"0 0 200 200\" xmlns=\"http://www.w3.org/2000/svg\" preserveAspectRatio=\"xMidYMid meet\">\n        {/* <!-- created using https://editor.method.ac --> */}\n        <g>\n            <title>background</title>\n            <rect fill=\"none\" id=\"canvas_background\" height=\"402\" width=\"582\" y=\"-1\" x=\"-1\" />\n        </g>\n        <g>\n            <title>Layer 1</title>\n            <g id=\"svg_1\" fill=\"#000000\" transform=\"translate(0, 200) scale(0.1, -0.1)\">\n                <path fill=\"#84D3DB\" id=\"svg_2\" d=\"m1369.99536,994.72168c-75,-21.00024 -101,-34.00024 -161,-80.00024c-68,-51.99976 -135,-150.99976 -153,-222.99976l-6,-28l150,0l150,0l0,60c0,33 4,60 9,60c5,0 43,-20 85,-45c42,-24 106,-61 143,-81c81,-45.00006 143,-83.00006 143,-88.00006c0,-3 -24,-18 -52,-33c-71,-39 -116,-65 -225,-129c-51,-30 -94,-54 -97,-54c-3,0 -6,29 -6,65l0,65l-151,0c-166,0 -152,6 -133,-61c14,-50 82,-144.99988 135,-188.99988c87,-72 151,-94 279,-95c88,0 115,4 163,23c119,48 224,165.99988 261,290.99988c30,102 13,250.00006 -36,323.00006c-10,14 -18,31 -18,36c0,16 -127,129.99976 -168,150.99976c-49,24 -158,51.00024 -208,50.00024c-21,0 -68,-8 -104,-18z\" />\n            </g>\n            <g id=\"svg_4\" fill=\"#000000\" transform=\"rotate(-120, 96.4437, 55.2508) translate(0, 200) scale(0.1, -0.1)\">\n                <path fill=\"#FFB27C\" id=\"svg_3\" d=\"m849.99731,1866.47681c-75,-21 -101,-34 -161,-80c-68,-52 -135,-150.99988 -153,-222.99988l-6,-28l150,0l150,0l0,60c0,33 4,59.99988 9,59.99988c5,0 43,-19.99988 85,-44.99988c42,-24 105.99805,-61 142.99805,-81c81,-45 143,-83 143,-88c0,-3 -24,-18 -52,-33c-71,-39 -116,-65 -224.99805,-129c-51,-30 -94,-54 -97,-54c-3,0 -6,29 -6,65l0,65l-151,0c-166,0 -152,6 -133,-61c14,-50 82,-145 135,-189c87,-72 151,-93.99939 279,-94.99939c87.99805,0 114.99805,4 162.99805,22.99939c119,48 224,166 261,291c30,102 13,250 -36,322.99988c-10,14 -18,31 -18,36c0,16 -127,130 -168,151c-49,24 -158,51 -207.99805,50c-21,0 -68,-8 -104,-18z\" />\n            </g>\n            <g id=\"svg_6\" fill=\"#000000\" transform=\"rotate(120, 50.1463, 142.426) translate(0, 200) scale(0.1, -0.1)\">\n                <path fill=\"#A0D58A\" id=\"svg_5\" d=\"m387.00516,994.72168c-75,-21.00024 -101,-34.00024 -161,-80.00024c-68,-51.99976 -135,-150.99976 -153,-222.99976l-6,-28l150,0l150,0l0,60c0,33 4,60 9,60c5,0 43,-20 85,-45c42,-24 105.99997,-61 142.99997,-81c81,-45.00006 143,-83.00006 143,-88.00006c0,-3 -24,-18 -52,-33c-71,-39 -116,-65 -224.99997,-129c-51,-30 -94,-54 -97,-54c-3,0 -6,29 -6,65l0,65l-151,0c-166,0 -152,6 -133,-61c14,-50 82,-144.99988 135,-188.99988c87,-72 151,-94 279,-95c87.99997,0 114.99997,4 162.99997,23c119,48 224,165.99988 261,290.99988c30,102 13,250.00006 -36,323.00006c-10,14 -18,31 -18,36c0,16 -127,129.99976 -168,150.99976c-49,24 -158,51.00024 -207.99997,50.00024c-21,0 -68,-8 -104,-18z\" />\n            </g>\n        </g>\n    </svg>\n    )\n}\n\nexport function RocketIcon(): JSX.Element {\n    return (\n        <SvgIcon>\n            <path fillRule=\"evenodd\" d=\"M20.322.75a10.75 10.75 0 00-7.373 2.926l-1.304 1.23A23.743 23.743 0 0010.103 6.5H5.066a1.75 1.75 0 00-1.5.85l-2.71 4.514a.75.75 0 00.49 1.12l4.571.963c.039.049.082.096.129.14L8.04 15.96l1.872 1.994c.044.047.091.09.14.129l.963 4.572a.75.75 0 001.12.488l4.514-2.709a1.75 1.75 0 00.85-1.5v-5.038a23.741 23.741 0 001.596-1.542l1.228-1.304a10.75 10.75 0 002.925-7.374V2.499A1.75 1.75 0 0021.498.75h-1.177zM16 15.112c-.333.248-.672.487-1.018.718l-3.393 2.262.678 3.223 3.612-2.167a.25.25 0 00.121-.214v-3.822zm-10.092-2.7L8.17 9.017c.23-.346.47-.685.717-1.017H5.066a.25.25 0 00-.214.121l-2.167 3.612 3.223.679zm8.07-7.644a9.25 9.25 0 016.344-2.518h1.177a.25.25 0 01.25.25v1.176a9.25 9.25 0 01-2.517 6.346l-1.228 1.303a22.248 22.248 0 01-3.854 3.257l-3.288 2.192-1.743-1.858a.764.764 0 00-.034-.034l-1.859-1.744 2.193-3.29a22.248 22.248 0 013.255-3.851l1.304-1.23zM17.5 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm-11 13c.9-.9.9-2.6 0-3.5-.9-.9-2.6-.9-3.5 0-1.209 1.209-1.445 3.901-1.49 4.743a.232.232 0 00.247.247c.842-.045 3.534-.281 4.743-1.49z\"></path>\n        </SvgIcon>\n    )\n}\n\nexport function GitBranchIcon(): JSX.Element {\n    return (\n        <SvgIcon>\n            <path fillRule=\"evenodd\" d=\"M5.75 21a1.75 1.75 0 110-3.5 1.75 1.75 0 010 3.5zM2.5 19.25a3.25 3.25 0 106.5 0 3.25 3.25 0 00-6.5 0zM5.75 6.5a1.75 1.75 0 110-3.5 1.75 1.75 0 010 3.5zM2.5 4.75a3.25 3.25 0 106.5 0 3.25 3.25 0 00-6.5 0zM18.25 6.5a1.75 1.75 0 110-3.5 1.75 1.75 0 010 3.5zM15 4.75a3.25 3.25 0 106.5 0 3.25 3.25 0 00-6.5 0z\"></path><path fillRule=\"evenodd\" d=\"M5.75 16.75A.75.75 0 006.5 16V8A.75.75 0 005 8v8c0 .414.336.75.75.75z\"></path><path fillRule=\"evenodd\" d=\"M17.5 8.75v-1H19v1a3.75 3.75 0 01-3.75 3.75h-7a1.75 1.75 0 00-1.75 1.75H5A3.25 3.25 0 018.25 11h7a2.25 2.25 0 002.25-2.25z\"></path>\n        </SvgIcon >\n    )\n}","import React from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport * as MuiIcons from '@material-ui/icons';\nimport Alert from '@material-ui/lab/Alert';\n\nimport SyntaxHighlighter from 'react-syntax-highlighter';\n\nimport { useStyles } from './styles';\n\n\nexport function PageHome(): JSX.Element {\n  const classes = useStyles();\n  return (\n    <Grid container spacing={2} className={classes.mainGrid}>\n      <Grid item xs={12} sm={12} md={6}>\n        <Paper variant=\"outlined\" className={classes.paper}>\n          <IntroBox />\n        </Paper>\n      </Grid>\n      <Grid item xs={12} sm={12} md={6}>\n        <Paper variant=\"outlined\" className={classes.paper}>\n          <GettingStartedBox />\n        </Paper>\n      </Grid>\n      <Grid item xs={12} sm={12} md={12}>\n        <Paper variant=\"outlined\" className={classes.paper}>\n          <DetailedBox />\n        </Paper>\n      </Grid>\n    </Grid>\n  );\n}\n\nexport function IntroBox(): JSX.Element {\n  return (\n    <div>\n      <h2>Introduction</h2>\n      <p>\n        This is a demonstration of the AiiDA Dashboard:<br />\n        A web-based UI for interfacing with AiiDA, that can also act as an extension for JupyterLab.\n      </p>\n      <p>\n        AiiDA Dashboard uses industry leading libraries, to create a beautiful and responsive UI:\n      </p>\n      <ul>\n        <li><a href=\"https://reactjs.org/\">React</a>: A library for building user interfaces, maintained by Facebook and with users including Whatsapp, Dropbox, Uber and Netflix.</li>\n        <li><a href=\"https://material-ui.com\">Material-UI</a>: A React component library that implements <a href=\"https://material.io/design\">Google’s Material Design</a> guidelines.</li>\n        <li><a href=\"https://react-query.tanstack.com/\">react-query</a>: A React component for synchronizing server data (from AiiDA) with the UI.</li>\n      </ul>\n      <p>\n        AiiDA Dashboard can be used as a standalone Web UI, or it also provides React components and facilitates wrapping into a JupyterLab <a href=\"https://jupyterlab.readthedocs.io/en/stable/extension/virtualdom.html\">extension widget</a>.\n      </p>\n      <p>\n          Alongside work on an <a href=\"https://github.com/aiidateam/AEP/pull/24\">Extended REST API</a>,\n        it is hoped that this will offer not just ways to explore your profiles, but also to actively interact them:\n        creating/adding to groups, composing/running workchains, etc.\n      </p>\n    </div>\n  )\n}\n\nexport function GettingStartedBox(): JSX.Element {\n  const classes = useStyles();\n  return (\n    <div>\n      <h2>Getting Started</h2>\n      <p>\n        To use this application, you need to be able to connect to a running AiiDA REST API server.\n      </p>\n      <Alert variant=\"outlined\" severity=\"info\">\n        If you want to try out this app but don't have your own AiiDA profile, you can use this demonstration server: <a href=\"https://15.188.110.176:5000/api/v4\">https://15.188.110.176:5000/api/v4</a>,\n        although note currently you will first need to open this address in a separate tab and accept the security certificate (under Advanced).\n      </Alert>\n      <p>\n        To start a server for your own profile, you must have aiida-core installed with the REST dependencies:\n      </p>\n      <SyntaxHighlighter language=\"bash\">\n        {\"$ pip install aiida-core[rest]~=1.6.3\"}\n      </SyntaxHighlighter>\n      <p>\n        Then you can start your REST server:\n      </p>\n      <SyntaxHighlighter language=\"bash\">\n        {\"$ verdi -p myprofile restapi\\n * REST API running on http://127.0.0.1:5000/api/v4\"}\n      </SyntaxHighlighter>\n      <p>\n        Take this URL and paste it into the \"REST URL\" box at the top-right of this page.\n        If a connection is available, then you should see the icon turn to:  <MuiIcons.CheckCircle className={classes.InlineIcon} />\n      </p>\n      <p>\n        Now try the tabs on the left of this page!\n      </p>\n    </div>\n  )\n}\n\nexport function DetailedBox(): JSX.Element {\n  return (\n    <div>\n      <h2>Project Discussion</h2>\n      <p>\n        Source repository: <a href=\"https://github.com/chrisjsewell/react-aiida-app\">https://github.com/chrisjsewell/react-aiida-app</a>\n      </p>\n      <p>This project is a continuation of <a href=\"https://github.com/chrisjsewell/jlab_aiidatree\">jlab_aiidatree</a>, in which we built a working prototype for a JupyterLab extension to interact with AiiDA.</p>\n      <p>During development of <code>jlab_aiidatree</code> it was noted that you can embed <a href=\"https://reactjs.org/\">React components</a> inside of JupyterLab (see <a href=\"https://jupyterlab.readthedocs.io/en/stable/extension/virtualdom.html\">JupyterLab/React</a>).</p>\n      <p>The goal, therefore, is that we can develop this package as a standalone app (which could also be utilised directly via a web server), but also use it as a dependency to generate most of the JupyterLab extension, via React components.</p>\n      <p>The benefit of also using th app within JupyterLab, is:</p>\n      <ol type=\"1\">\n        <li>It provides a platform within which to run the app locally, without having to host it directly</li>\n        <li>It allows us an alternate route to interface with AiiDA: via the “private” REST API interface between the JupyterLab backend and frontend. Using this REST API, will allow us easy access to parts of the AiiDA API that are yet to be exposed in REST, whilst maintaining that formal protocol (enforcing separation of concerns). We can then use this to essentially prototype additions to the AiiDA REST API.</li>\n        <li>It provides the possible to integrate with other aspects of the Jupyter framework (e.g. Notebooks)</li>\n      </ol>\n      <h3 id=\"about-react\">About React</h3>\n      <p>React is an industry leading library, for creating beautiful and responsive UIs, maintained by Facebook and with users including Whatsapp, Dropbox, Uber and Netflix. We also utilise other “best-practice” React components:</p>\n      <ul>\n        <li><a href=\"https://material-ui.com\">Material-UI</a>: A React component library that implements Google’s <a href=\"https://material.io/design\">Material Design guidelines</a></li>\n        <li><a href=\"https://react-query.tanstack.com/\">react-query</a>: A React component for synchronizing server data (from AiiDA) with the UI.</li>\n      </ul>\n      <p>React itself is really user-friendly to get started with, even with only a small familiarity with HTML and JavaScript, see <a href=\"https://reactjs.org/tutorial/tutorial.html\">https://reactjs.org/tutorial/tutorial.html</a>. Once learned, it is also incredibly intuitive to generate web elements with, using the <a href=\"https://reactjs.org/docs/introducing-jsx.html\"><code>.jsx</code> file format</a>. For example a simple React component would look like:</p>\n      <SyntaxHighlighter language=\"jsx\">\n        {\n          `function MyComponent(props) {\n  return (\n    <div>\n      <h1>Hello, world!</h1>\n      <p>Here is a dynamic value: {props.value}</p>\n    </div>\n  )\n}`\n        }\n      </SyntaxHighlighter>\n      <h3 id=\"this-app-vs-materials-cloud-explore\">This app vs Materials Cloud Explore</h3>\n      <p><b>Update:</b> Materials Cloud is in fact now looking to move to React.</p>\n      <p>Note, initial features of this app are quite similar to <a href=\"https://www.materialscloud.org/explore/connect\">https://www.materialscloud.org/explore/connect</a>: using the AiiDA REST API as a backend for visualising its data. However, this is built with <a href=\"https://angularjs.org/\">https://angularjs.org/</a> which, although also well used in industry, has two major drawbacks for our use case:</p>\n      <ol type=\"1\">\n        <li>You cannot integrate it with JupyterLab (see benefits above)</li>\n        <li>It does not have the re-usable component infrastructure of React, which should allow us to eventually build an extensible app with “pluggable” extensions.</li>\n      </ol>\n      <h3 id=\"this-app-vs-aiidalab\">This app vs AiiDALab</h3>\n      <p><a href=\"https://www.materialscloud.org/work/aiidalab\">AiiDALab</a> uses the Jupyter Notebook server to build its frontend, via <a href=\"https://ipywidgets.readthedocs.io\">ipywidgets</a>, which dynamically generates the HTML/Javascript from python code cells, and appmode/voila which executes the Notebook on page load, then converts the notebook interface to look more like a web app (hiding code cells, etc). Note, despite its name, it does not use JupyterLab per se.</p>\n      <p>The benefits of this approach, is that:</p>\n      <ol type=\"1\">\n        <li>You can code everything in Python/Jupyter Notebooks, which is obviously the background of many working on AiiDA (being a Python package), albeit that, if you want to do anything substantial with these apps you inevitably have to learn some HTML/JavaScript.</li>\n        <li>You can interface directly with the AiiDA Python API</li>\n      </ol>\n      <p>The disadvantage though is that the apps which it creates are substantially limited in the user interfaces (UI) and user experience (UX) they can create.</p>\n      <ol type=\"1\">\n        <li>On every page load you need to first execute the notebook, then render it, meaning loads times are extremely poor by web standards.</li>\n        <li>You are restricted by the semantics/layout of the Notebook, i.e. each app has to be a set of separate pages and in each page you have a set of vertically sequential cells.</li>\n        <li>You are restricted by the semantics/functionality of ipywidgets, by industry standard, a very niche/bespoke tool. In practice, you end up taking a lot of time to learn/create a lot of HTML widgets that have little to no practical reusability, rather than being able to utilise the massive React ecosystem of libraries and components.</li>\n      </ol>\n\n    </div>\n  )\n}","import React, { useContext } from 'react'\n\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport Collapse from '@material-ui/core/Collapse';\nimport Divider from '@material-ui/core/Divider';\nimport * as MuiIcons from '@material-ui/icons';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n// import Typography from '@material-ui/core/Typography';\n\nimport Alert from '@material-ui/lab/Alert';\nimport Pagination from '@material-ui/lab/Pagination';\n\nimport CircularProgress from '@material-ui/core/CircularProgress'\n\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Chip from '@material-ui/core/Chip';\n\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport { useQuery } from 'react-query'\nimport copy from 'copy-to-clipboard';\n\nimport { AiidaSettingsContext, getNodes, getNodeIncoming, getNodeOutgoing, getNodeRepoList } from './aiidaClient'\nimport { GitBranchIcon, RocketIcon } from './icons'\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        tree: {\n            width: '100%',\n            maxWidth: 520,\n            backgroundColor: theme.palette.background.paper,\n        },\n        refresh: {\n            marginRight: theme.spacing(1),\n        },\n        pagination: {\n            paddingTop: theme.spacing(2),\n            paddingBottom: theme.spacing(1)\n        },\n        listChip: {\n            marginLeft: theme.spacing(1),\n            marginBottom: theme.spacing(1),\n            float: \"right\"\n        },\n        item: {\n            maxWidth: 480,\n            overflow: \"hidden\",\n        },\n        nested1: {\n            paddingLeft: theme.spacing(4),\n        },\n        nested2: {\n            paddingLeft: theme.spacing(8),\n        },\n    }),\n);\n\n\nconst initialMouseState = {\n    mouseX: null,\n    mouseY: null\n} as { mouseX: null | number; mouseY: null | number }\n\n\ninterface IAiidaTreeElementProps {\n    pk: number\n    uuid: string\n    elementName?: string\n    header: string\n    info?: string\n    tooltip?: string\n    procLabel?: string\n    procState?:\n    | 'created'\n    | 'running'\n    | 'waiting'\n    | 'finished'\n    | 'excepted'\n    | 'killed'\n    procExit?: number\n    nested?: boolean\n}\n\n\nexport function AiidaNodeTree({ nodePrefix }: { nodePrefix: string }): JSX.Element {\n    /**\n     * a React component housing a list of AiiDA elements\n    */\n\n    const classes = useStyles();\n    const [page, setPage] = React.useState(1);\n    const handlePageChange = (event: React.ChangeEvent<unknown>, value: number) => {\n        setPage(value);\n    };\n    const aiidaSettings = useContext(AiidaSettingsContext)\n    // TODO usePaginationQuery\n    const result = useQuery([aiidaSettings.baseUrl, 'nodes', nodePrefix, page], () => getNodes(aiidaSettings.baseUrl, nodePrefix, page), { enabled: aiidaSettings.baseUrl !== null })\n\n    let element = <CircularProgress />\n    let pages = 1\n    if (result.isIdle || result.data === null) {\n        element = <Alert severity=\"info\" icon={<MuiIcons.SyncDisabled />}>Disabled</Alert>\n    } else if (result.data !== undefined) {\n        pages = Math.ceil(result.data.totalCount / result.data.perPage)\n        element = (\n            <List component=\"nav\" aria-label=\"main aiida tree\">\n                {result.data.nodes.map((value) => {\n                    return <AiidaTreeElement\n                        pk={value.id}\n                        uuid={value.uuid}\n                        header={`${value.id} ${value.attributes?.process_label || ''}`}\n                        elementName={value.node_type.split(\".\").slice(0, 2).join(\".\")}\n                        info={`${value.mtime}, ${value.node_type}, ${value.process_type || ''}`}\n                        tooltip={`UUID: ${value.uuid}`}\n                        procLabel={value.attributes?.process_label}\n                        procState={value.attributes?.process_state}\n                        procExit={value.attributes?.exit_status}\n                    />\n                })}\n            </List>\n        )\n    } else if (result.isError) {\n        const error = result.error as { message: string }\n        element = <Alert severity=\"error\">{error.message}</Alert>\n    }\n    let updateInfo = <span></span>\n    if (!!result.dataUpdatedAt) {\n        const date = new Date(result.dataUpdatedAt)\n        updateInfo = <span>Updated: {date.toLocaleString()}</span>\n    }\n\n    return (\n        <div className={classes.tree}>\n            <Button\n                variant=\"outlined\"\n                color=\"primary\"\n                className={classes.refresh}\n                startIcon={<MuiIcons.Refresh />}\n                onClick={() => { result.refetch() }}\n            >\n                Refresh\n            </Button>\n            {updateInfo}\n            <Pagination\n                className={classes.pagination}\n                color=\"primary\"\n                count={pages} page={page}\n                onChange={handlePageChange}\n            />\n            {element}\n        </div>\n    )\n}\n\n// TODO better value type, custom icons (https://primer.style/octicons/packages/react)\nconst ElementIconMap: { [key: string]: JSX.Element } = {\n    'default': <MuiIcons.DeviceUnknown />,\n    'folder': <MuiIcons.Inbox />,\n    'data.array': <MuiIcons.GridOn />,\n    'data.bool': <MuiIcons.CheckCircle />,\n    'data.cif': <MuiIcons.ScatterPlot />,\n    'data.code': <MuiIcons.Code />,\n    'data.dict': <MuiIcons.ViewList />,\n    'data.float': <MuiIcons.AllInclusive />,\n    'data.folder': <MuiIcons.Inbox />,\n    'data.int': <MuiIcons.LooksOne />,\n    'data.list': <MuiIcons.List />,\n    'data.numeric': <MuiIcons.PlusOne />,\n    'data.orbital': <MuiIcons.BlurOn />,\n    'data.remote': <MuiIcons.OpenInNew />,\n    'data.str': <MuiIcons.FormatColorText />,\n    'data.structure': <MuiIcons.Grain />,\n    'process.calculation': <RocketIcon />,\n    'process.process': <RocketIcon />,\n    'process.workflow': <GitBranchIcon />,  // <MuiIcons.Share />,\n}\n\n\nfunction AiidaTreeElement(props: IAiidaTreeElementProps): JSX.Element {\n\n    const classes = useStyles();\n\n    const key = props.elementName === undefined ? 'default' : props.elementName\n    let icon = ElementIconMap[key] || <MuiIcons.DeviceUnknown />\n\n    const [open, setOpen] = React.useState(false);\n    const handleClick = () => {\n        setOpen(!open);\n    };\n\n    const [contextPosition, setContextPosition] = React.useState<{\n        mouseX: null | number;\n        mouseY: null | number;\n    }>(initialMouseState);\n\n    // TODO currently if you right-click a second time,\n    // it will simply move the current open menu,\n    // not close it and open the \"correct\" context-menu for the position on the screen\n    const handleRightClick = (event: React.MouseEvent<HTMLDivElement>) => {\n        event.preventDefault();\n        setContextPosition({\n            mouseX: event.clientX - 2,\n            mouseY: event.clientY - 4,\n        });\n    };\n\n    const handleContextClose = (event: React.MouseEvent) => {\n        event.preventDefault();\n        event.stopPropagation();\n        setContextPosition(initialMouseState);\n    };\n    const copyUUIDtoClipboard = (event: React.MouseEvent) => {\n        event.preventDefault();\n        event.stopPropagation();\n        setContextPosition(initialMouseState);\n        copy(`${props.uuid}`)\n    }\n\n    // TODO react-markdown for tooltip\n    if (props.tooltip !== undefined) {\n        icon = (\n            <Tooltip title={\n                <React.Fragment>\n                    <p>{props.tooltip}</p>\n                </React.Fragment>\n            }>\n                <span>{icon}</span>\n            </Tooltip>\n        )\n    }\n\n    let title = <span>{props.header}</span>\n    if (['excepted', 'killed'].includes(props.procState || '')) {\n        title = <span>{props.header}<Chip className={classes.listChip} label={`${props.procState} [${props.procExit}]`} variant=\"outlined\" color=\"secondary\" /></span>\n    } else if (!!props.procState) {\n        title = <span>{props.header}<Chip className={classes.listChip} label={`${props.procState} [${props.procExit}]`} variant=\"outlined\" color=\"primary\" /></span>\n    }\n\n    return (\n        <React.Fragment>\n            <ListItem key={props.pk} button onClick={handleClick} onContextMenu={handleRightClick} className={props.nested ? classes.nested2 : undefined} >\n                <ListItemAvatar>\n                    <Avatar>\n                        {icon}\n                    </Avatar>\n                </ListItemAvatar>\n                <ListItemText\n                    className={classes.item}\n                    primary={title}\n                    secondary={props.info}\n                />\n                {/* TODO context menu does not close on a right-click not over the node */}\n                <Menu\n                    keepMounted\n                    open={contextPosition.mouseY !== null}\n                    onClose={handleContextClose}\n                    anchorReference=\"anchorPosition\"\n                    anchorPosition={\n                        contextPosition.mouseY !== null && contextPosition.mouseX !== null\n                            ? { top: contextPosition.mouseY, left: contextPosition.mouseX }\n                            : undefined\n                    }\n                >\n                    <ListItem><b>PK {props.pk} Menu</b></ListItem>\n                    <MenuItem onClick={copyUUIDtoClipboard}>Copy UUID to Clipboard</MenuItem>\n                    <MenuItem onClick={handleContextClose}>Close</MenuItem>\n                    {/* <MenuItem onClick={handleContextClose}>Open Data</MenuItem>\n                    <MenuItem onClick={handleContextClose}>Add to Group</MenuItem> */}\n                </Menu>\n                {props.nested ? null : (open ? <MuiIcons.ExpandMore /> : <MuiIcons.ExpandLess />)}\n            </ListItem>\n            {props.nested ? null : <AiidaNodeChildren nodeUUID={props.uuid} open={open} />}\n            <Divider light />\n        </React.Fragment>\n    )\n}\n\n\nfunction AiidaNodeChildren({ nodeUUID, open }: { nodeUUID: string | null, open: boolean }): JSX.Element {\n    const classes = useStyles();\n    const [openRepo, setOpenRepo] = React.useState(false);\n    const handleRepoClick = () => {\n        setOpenRepo(!openRepo);\n    };\n    const [openIncoming, setOpenIncoming] = React.useState(false);\n    const handleIncomingClick = () => {\n        setOpenIncoming(!openIncoming);\n    };\n    const [openOutgoing, setOpenOutgoing] = React.useState(false);\n    const handleOutgoingClick = () => {\n        setOpenOutgoing(!openOutgoing);\n    };\n    return (\n        <Collapse in={open} timeout=\"auto\">\n            <List component=\"div\" disablePadding>\n                <ListItem button onClick={handleRepoClick} className={classes.nested1}>\n                    <ListItemIcon>\n                        <MuiIcons.Inbox />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Repository\" />\n                    {openRepo ? <MuiIcons.ExpandMore /> : <MuiIcons.ExpandLess />}\n                </ListItem>\n                <Collapse in={openRepo} mountOnEnter>\n                    <AiidaRepoList nodeUUID={nodeUUID} />\n                </Collapse>\n                <ListItem button onClick={handleIncomingClick} className={classes.nested1}>\n                    <ListItemIcon>\n                        <MuiIcons.ArrowForward />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Incoming\" />\n                    {openIncoming ? <MuiIcons.ExpandMore /> : <MuiIcons.ExpandLess />}\n                </ListItem>\n                <Collapse in={openIncoming} mountOnEnter>\n                    <AiidaLinkIncomingList nodeUUID={nodeUUID} />\n                </Collapse>\n                <ListItem button onClick={handleOutgoingClick} className={classes.nested1}>\n                    <ListItemIcon>\n                        <MuiIcons.ArrowBack />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Outgoing\" />\n                    {openOutgoing ? <MuiIcons.ExpandMore /> : <MuiIcons.ExpandLess />}\n                </ListItem>\n                <Collapse in={openOutgoing} mountOnEnter>\n                    <AiidaLinkOutgoingList nodeUUID={nodeUUID} />\n                </Collapse>\n            </List>\n        </Collapse>\n    )\n}\n\n\nfunction AiidaRepoList({ nodeUUID }: { nodeUUID: string | null }): JSX.Element {\n    const classes = useStyles();\n    const aiidaSettings = useContext(AiidaSettingsContext)\n    // TODO usePaginationQuery\n    const result = useQuery([aiidaSettings.baseUrl, 'nodeRepolist', nodeUUID], () => getNodeRepoList(aiidaSettings.baseUrl, nodeUUID), { enabled: aiidaSettings.baseUrl !== null })\n\n    let element = <CircularProgress />\n    if (result.isIdle || result.data === null) {\n        element = <Alert severity=\"info\" icon={<MuiIcons.SyncDisabled />}>Disabled</Alert>\n    } else if (result.data !== undefined) {\n        element = (\n            <List component=\"nav\" aria-label=\"main aiida repo\">\n                {result.data.map((value) => {\n                    return (\n                        <ListItem className={classes.nested2}>\n                            <ListItemIcon>\n                                {value.type === \"DIRECTORY\" ? <MuiIcons.Folder /> : <MuiIcons.Description />}\n                            </ListItemIcon>\n                            <ListItemText primary={value.name} />\n                        </ListItem>\n                    )\n                })}\n            </List>\n        )\n    } else if (result.isError) {\n        const error = result.error as { message: string }\n        element = <Alert severity=\"error\">{error.message}</Alert>\n    }\n\n    return element\n}\n\n\nfunction AiidaLinkIncomingList({ nodeUUID }: { nodeUUID: string | null }): JSX.Element {\n\n    const aiidaSettings = useContext(AiidaSettingsContext)\n    const result = useQuery([aiidaSettings.baseUrl, 'nodeIncoming', nodeUUID], () => getNodeIncoming(aiidaSettings.baseUrl, nodeUUID), { enabled: aiidaSettings.baseUrl !== null })\n\n    let element = <CircularProgress />\n    if (result.isIdle || result.data === null) {\n        element = <Alert severity=\"info\" icon={<MuiIcons.SyncDisabled />}>Disabled</Alert>\n    } else if (result.data !== undefined) {\n        element = (\n            <List component=\"nav\" aria-label=\"main aiida incoming\">\n                {result.data.map((value) => {\n                    return (\n                        <AiidaTreeElement\n                            nested={true}\n                            pk={value.id}\n                            uuid={value.uuid}\n                            header={`${value.id} ${value.link_type.toUpperCase()} ${value.link_label}`}\n                            elementName={value.node_type.split(\".\").slice(0, 2).join(\".\")}\n                            info={`${value.mtime}, ${value.node_type}, ${value.process_type || ''}`}\n                            tooltip={`UUID: ${value.uuid}`}\n                        />\n                    )\n                })}\n            </List>\n        )\n    } else if (result.isError) {\n        const error = result.error as { message: string }\n        element = <Alert severity=\"error\">{error.message}</Alert>\n    }\n\n    return element\n}\n\nfunction AiidaLinkOutgoingList({ nodeUUID }: { nodeUUID: string | null }): JSX.Element {\n\n    const aiidaSettings = useContext(AiidaSettingsContext)\n    const result = useQuery([aiidaSettings.baseUrl, 'nodeOutgoing', nodeUUID], () => getNodeOutgoing(aiidaSettings.baseUrl, nodeUUID), { enabled: aiidaSettings.baseUrl !== null })\n\n    let element = <CircularProgress />\n    if (result.isIdle || result.data === null) {\n        element = <Alert severity=\"info\" icon={<MuiIcons.SyncDisabled />}>Disabled</Alert>\n    } else if (result.data !== undefined) {\n        element = (\n            <List component=\"nav\" aria-label=\"main aiida incoming\">\n                {result.data.map((value) => {\n                    return (\n                        <AiidaTreeElement\n                            nested={true}\n                            pk={value.id}\n                            uuid={value.uuid}\n                            header={`${value.id} ${value.link_type.toUpperCase()} ${value.link_label}`}\n                            elementName={value.node_type.split(\".\").slice(0, 2).join(\".\")}\n                            info={`${value.mtime}, ${value.node_type}, ${value.process_type || ''}`}\n                            tooltip={`UUID: ${value.uuid}`}\n                        />\n                    )\n                })}\n            </List>\n        )\n    } else if (result.isError) {\n        const error = result.error as { message: string }\n        element = <Alert severity=\"error\">{error.message}</Alert>\n    }\n\n    return element\n}\n\n","import { useState } from 'react'\n\n\n/**\n * A wrapper for useState, which syncs the state to local storage,\n * so that it persists through a page change/refresh\n */\nexport function useLocalStorage<T>(key: string, initialValue: T) {\n    // see https://usehooks.com/useLocalStorage/\n    // State to store our value\n    // Pass initial state function to useState so logic is only executed once\n    const [storedValue, setStoredValue] = useState<T>(() => {\n      try {\n        // Get from local storage by key\n        const item = window.localStorage.getItem(key);\n        // Parse stored json or if none return initialValue\n        return item ? JSON.parse(item) : initialValue;\n      } catch (error) {\n        // If error also return initialValue\n        console.log(error);\n        return initialValue;\n      }\n    });\n  \n    // Return a wrapped version of useState's setter function that ...\n    // ... persists the new value to localStorage.\n    const setValue = (value: T | ((val: T) => T)) => {\n      try {\n        // Allow value to be a function so we have same API as useState\n        const valueToStore =\n          value instanceof Function ? value(storedValue) : value;\n        // Save state\n        setStoredValue(valueToStore);\n        // Save to local storage\n        window.localStorage.setItem(key, JSON.stringify(valueToStore));\n      } catch (error) {\n        // A more advanced implementation would handle the error case\n        console.log(error);\n      }\n    };\n  \n    return [storedValue, setValue] as const;\n  }","import React, { useContext } from 'react'\n\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport CircularProgress from '@material-ui/core/CircularProgress'\n// import Box from '@material-ui/core/Box';\nimport TextField from '@material-ui/core/TextField';\n\nimport { useQuery } from 'react-query'\nimport ReactJson from 'react-json-view'\n\nimport { AiidaSettingsContext, getNodeStatistics, getNode } from './aiidaClient'\nimport { AiidaNodeTree } from './nodeTree';\nimport { useStyles } from './styles';\nimport { useLocalStorage } from './utils'\n\n\nexport function PageNodeExplorer(): JSX.Element {\n  const classes = useStyles();\n  const [nodePrefix, setnodePrefix] = useLocalStorage('aiida-node-explorer-type-prefix',  \"process.\");\n  const [nodeFieldsUUID, setnodeFieldsUUID] = React.useState(null as string | null);\n\n  return (\n    <Grid container spacing={2} className={classes.mainGrid} direction=\"row-reverse\">\n\n      <Grid item xs={12} sm={12} md={6}>\n        <Paper variant=\"outlined\" className={classes.paper}>\n\n          <Accordion defaultExpanded>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}><h3>AiiDA Node Explorer</h3></AccordionSummary>\n            <AccordionDetails><NodeExplorerIntroduction /></AccordionDetails>\n          </Accordion>\n          <Accordion>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}><h3>Filters</h3></AccordionSummary>\n            <AccordionDetails>\n              <NodeExplorerFilters nodePrefix={nodePrefix} setnodePrefix={setnodePrefix} />\n            </AccordionDetails>\n          </Accordion>\n          <Accordion>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}><h3>Database Fields</h3></AccordionSummary>\n            <AccordionDetails className={classes.overflowAuto}><NodeExplorerAttributes nodeFieldsUUID={nodeFieldsUUID} setnodeFieldsUUID={setnodeFieldsUUID} /></AccordionDetails>\n          </Accordion>\n          <Accordion>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}><h3>File Contents</h3></AccordionSummary>\n            <AccordionDetails>TODO ...</AccordionDetails>\n          </Accordion>\n\n        </Paper>\n      </Grid>\n\n      <Grid item xs={12} sm={12} md={6}>\n        <Paper variant=\"outlined\" className={classes.paper}>\n          <AiidaNodeTree nodePrefix={nodePrefix} />\n        </Paper>\n      </Grid>\n\n    </Grid>\n  );\n}\n\n\nexport function NodeExplorerIntroduction(): JSX.Element {\n  return (\n      <div>\n        <p>The node explorer allows you to visualise the nodes in your AiiDA profile as a filtered tree.</p>\n        <p>Use the filter section below to select which node type you want to explore.</p>\n        <p>\n          You can right-click on a node to see additional actions,\n          including copying its UUID to the clipboard.\n          You can use this to show all of if its content in the \"Database Fields\" section.\n          </p>\n      </div>\n  )\n}\n\nconst nodePrefixesDefault = {\n  \"data.\": null, \"data.array.\": null, \"data.bool.\": null, \"data.cif.\": null, \"data.code.\": null, \"data.dict.\": null,\n  \"data.float.\": null, \"data.folder.\": null, \"data.int.\": null, \"data.list.\": null, \"data.numeric.\": null,\n  \"data.orbital.\": null, \"data.remote.\": null, \"data.structure.\": null,\n  \"process.\": null, \"process.calculation.\": null, \"process.workflow.\": null\n} as { [key: string]: null | number }\n\nexport function NodeExplorerFilters({ nodePrefix, setnodePrefix }: { nodePrefix: string, setnodePrefix: React.Dispatch<React.SetStateAction<string>> }): JSX.Element {\n  const classes = useStyles();\n  const aiidaSettings = useContext(AiidaSettingsContext)\n  const result = useQuery([aiidaSettings.baseUrl, 'statistics'], () => getNodeStatistics(aiidaSettings.baseUrl), { enabled: aiidaSettings.baseUrl !== null })\n\n  let nodePrefixes = nodePrefixesDefault\n  if (result.data) {\n    nodePrefixes = result.data.types\n    // TODO do this programmatically\n    nodePrefixes[\"data.\"] = null\n    nodePrefixes[\"process.\"] = null\n    nodePrefixes[\"process.calculation.\"] = null\n    nodePrefixes[\"process.workflow.\"] = null\n  }\n\n  return (\n    <React.Fragment>\n      <FormControl className={classes.formControl}>\n        <InputLabel id=\"node-prefix-select-label\">Node Type Prefix</InputLabel>\n        <Select\n          labelId=\"node-prefix-select-label\"\n          id=\"node-prefix-select\"\n          value={nodePrefix}\n          onChange={(event: React.ChangeEvent<{ value: unknown }>) => { setnodePrefix(event.target.value as string); }}\n        >\n          {Object.entries(nodePrefixes).sort().map(([name, count]) => (\n            <MenuItem value={name}>\n              {count === null ? name : `${name} (${count})`}\n            </MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n    </React.Fragment>\n  )\n}\n\nexport function NodeExplorerAttributes({ nodeFieldsUUID, setnodeFieldsUUID }: { nodeFieldsUUID: null | string, setnodeFieldsUUID: React.Dispatch<React.SetStateAction<string | null>> }): JSX.Element {\n  const classes = useStyles();\n  const aiidaSettings = useContext(AiidaSettingsContext)\n  const result = useQuery([aiidaSettings.baseUrl, 'node', nodeFieldsUUID], () => getNode(aiidaSettings.baseUrl, nodeFieldsUUID), { enabled: aiidaSettings.baseUrl !== null })\n  const handleUUIDChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setnodeFieldsUUID(event.target.value);\n  }\n  let view = null as null | JSX.Element\n  if (result.data) {\n    view = <ReactJson src={result.data} collapseStringsAfterLength={40} />\n  } else if (result.isFetching) {\n    view = <CircularProgress />\n  }\n  return (\n    <Grid container>\n      <Grid xs={12}>\n        <TextField\n          label=\"UUID\"\n          value={nodeFieldsUUID}\n          onChange={handleUUIDChange}\n          error={!!result.error}\n          helperText={!result.error ? undefined : `${result.error}`}\n          fullWidth\n        />\n      </Grid>\n      <Grid xs={12} className={classes.padTop}>\n        {view}\n      </Grid>\n    </Grid>\n  )\n}\n","import React, { useContext, useEffect, useRef } from 'react'\n\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '@material-ui/core/TextField';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport Typography from '@material-ui/core/Typography';\nimport Slider from '@material-ui/core/Slider';\n\nimport ForceGraph2D, { NodeObject, LinkObject, ForceGraphMethods } from 'react-force-graph-2d'\nimport { forceCollide } from 'd3-force'\nimport { useQuery } from 'react-query'\nimport { SizeMe } from 'react-sizeme'\n\nimport { AiidaSettingsContext, IAiidaRestNodeLinkItem, getNodeOutgoing, getNodeIncoming, uuidPattern } from './aiidaClient'\nimport { useStyles } from './styles';\nimport { useLocalStorage } from './utils'\n\n\ntype DagType = 'td' | 'bu' | 'lr' | 'rl' | 'radialout' | 'radialin'\n\n\nexport function PageProvenanceGraph(): JSX.Element {\n    const classes = useStyles();\n    const [rootUUID, setrootUUID] = useLocalStorage('aiida-provenence-graph-root-uuid', null as null | string);\n    const [dagMode, setdagMode] = useLocalStorage('aiida-provenence-graph-dag-mode', 'lr' as DagType);\n    const [dagLevelDistance, setdagLevelDistance] = useLocalStorage('aiida-provenence-graph-dag-level-dist', 50);\n\n    const handleUUIDChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        setrootUUID(event.target.value);\n    }\n\n    return (\n        <Grid container spacing={2} className={classes.mainGrid} direction=\"row-reverse\">\n\n            <Grid item xs={12} sm={12} md={6}>\n                <Paper variant=\"outlined\" className={classes.paper}>\n                    <Accordion defaultExpanded>\n                        <AccordionSummary expandIcon={<ExpandMoreIcon />}><h3>Provenance Graph Visualisation</h3></AccordionSummary>\n                        <AccordionDetails><ProvenanceGraphIntroduction /></AccordionDetails>\n                    </Accordion>\n                </Paper>\n            </Grid>\n            <Grid item xs={12} sm={12} md={6}>\n                <Paper variant=\"outlined\" className={classes.paper}>\n                    <TextField\n                        label=\"Root UUID\"\n                        value={rootUUID || ''}\n                        onChange={handleUUIDChange}\n                        error={rootUUID ? !uuidPattern.test(rootUUID) : false}\n                        // helperText={!result.error ? undefined : `${result.error}`}\n                        fullWidth\n                    />\n                    <FormControl className={classes.formControl}>\n                        <InputLabel id=\"dag-mode-select-label\">DAG Mode</InputLabel>\n                        <Select\n                            labelId=\"dag-mode-select-label\"\n                            id=\"dag-mode-select\"\n                            value={dagMode}\n                            onChange={(event: React.ChangeEvent<{ value: unknown }>) => { setdagMode(event.target.value as DagType); }}\n                        >\n                            {['td', 'bu', 'lr', 'rl', 'radialout', 'radialin'].map((name) => (\n                                <MenuItem value={name}>\n                                    {name}\n                                </MenuItem>\n                            ))}\n                        </Select>\n\n                        <Typography id=\"discrete-slider\" gutterBottom>\n                            DAG Level Distance\n                        </Typography>\n                        <Slider\n                            defaultValue={dagLevelDistance}\n                            aria-labelledby=\"discrete-slider\"\n                            valueLabelDisplay=\"auto\"\n                            step={10}\n                            marks\n                            min={10}\n                            max={200}\n                            onChange={(event: React.ChangeEvent<{}>, value: number | number[]) => { setdagLevelDistance(value as number); }}\n                        />\n                    </FormControl>\n                    <AiidaProvenanceGraph nodeUUID={rootUUID} dagMode={dagMode} dagLevelDistance={dagLevelDistance} />\n                </Paper>\n            </Grid>\n        </Grid>\n    )\n}\n\n\nexport function ProvenanceGraphIntroduction(): JSX.Element {\n    return (\n        <div>\n            <p>This is a work in progress!</p>\n            <p>Input a root node UUID and you will see a visualisation of its local provenance graph.</p>\n            <p>Hover over a node or link to see more information about it (you may have to click on the area first).</p>\n        </div>\n    )\n}\n\ninterface Node2dObject extends NodeObject {\n    name?: string\n    label?: string\n    color?: string\n    fillColor?: string\n    val?: number\n    __bckgDimensions?: number[]\n}\n\nexport function AiidaProvenanceGraph({ nodeUUID, dagMode, dagLevelDistance }: { nodeUUID: string | null, dagMode: DagType, dagLevelDistance: number }): JSX.Element {\n    const fgRef = useRef();\n    const aiidaSettings = useContext(AiidaSettingsContext)\n    const resultIncoming = useQuery([aiidaSettings.baseUrl, 'nodeIncoming', nodeUUID], () => getNodeIncoming(aiidaSettings.baseUrl, nodeUUID), { enabled: aiidaSettings.baseUrl !== null })\n    const resultOutgoing = useQuery([aiidaSettings.baseUrl, 'nodeOutgoing', nodeUUID], () => getNodeOutgoing(aiidaSettings.baseUrl, nodeUUID), { enabled: aiidaSettings.baseUrl !== null })\n\n    useEffect(() => {\n        // add collision force\n        const fg = fgRef.current as undefined | ForceGraphMethods\n        if (fg !== undefined) {\n            // Deactivate existing forces\n            // @ts-ignore\n            fg.d3Force('charge', null);\n            // @ts-ignore\n            fg.d3Force('collision', forceCollide(15));\n            // fg.d3Force('box' ...\n        }\n    }, [resultIncoming, resultOutgoing]);\n\n    const rootNode = {\n        \"id\": \"root\",\n        \"name\": \"root\",\n        \"label\": \"ROOT\",\n        \"val\": 2,\n        \"color\": \"red\",\n    } as Node2dObject\n    let nodes = [rootNode] as Node2dObject[]\n    let links = [] as LinkObject[]\n\n    if (resultIncoming.data) {\n        nodes.push(...resultIncoming.data.map((node) => {\n            return createNodeData(node)\n        }))\n        links.push(...resultIncoming.data.map((node) => {\n            return {\n                \"target\": \"root\",\n                \"source\": `${node.id}`,\n                \"name\": `${node.link_label}`\n            }\n        }))\n    }\n    if (resultOutgoing.data) {\n        nodes.push(...resultOutgoing.data.map((node) => {\n            return createNodeData(node)\n        }))\n        links.push(...resultOutgoing.data.map((node) => {\n            return {\n                \"source\": \"root\",\n                \"target\": `${node.id}`,\n                \"name\": `${node.link_label}`\n            }\n        }))\n    }\n\n    const data = {\n        \"nodes\": nodes,\n        \"links\": links\n    }\n    return (\n        <SizeMe>\n            {({ size }) => <ForceGraph2D\n                ref={fgRef}\n                graphData={data}\n                width={size.width === null ? undefined : size.width}\n                height={size.height === null ? undefined : size.height}\n                dagMode={dagMode}\n                dagLevelDistance={dagLevelDistance}\n                nodeCanvasObject={nodeCanvasObject}\n                linkDirectionalArrowLength={3.5}\n                linkDirectionalArrowRelPos={1}\n            />}\n        </SizeMe>\n    )\n}\n\n\nfunction createNodeData(node: IAiidaRestNodeLinkItem): Node2dObject {\n    const node_type = node.node_type.split(\".\")\n    node_type.pop()\n    return {\n        \"id\": `${node.id}`,\n        \"name\": `${node.id}${node.process_type? ', ' + node.process_type : ''}`,\n        \"label\": node_type.pop(),\n        \"val\": 40,\n        \"color\": \"blue\",\n    }\n}\n\n\nfunction nodeCanvasObject(node: Node2dObject, ctx: CanvasRenderingContext2D, globalScale: number): void {\n    const label = `${node.label || \"\"}`;\n    const fontSize = 12 / globalScale;\n    ctx.font = `${fontSize}px Sans-Serif`;\n    const textWidth = ctx.measureText(label).width;\n    const bckgDimensions = [textWidth, fontSize].map(n => n + fontSize * 0.2); // some padding\n\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    ctx.strokeStyle = 'rgba(0, 0, 0, 0.1)'\n    if (node.x !== undefined && node.y !== undefined) {\n        if (node.fillColor) {\n            ctx.fillStyle = node.fillColor || 'rgba(255, 255, 255, 0.8)';\n            ctx.fillRect(node.x - bckgDimensions[0] / 2, node.y - bckgDimensions[1] / 2, bckgDimensions[0], bckgDimensions[1]);\n        }\n        ctx.strokeRect(node.x - bckgDimensions[0] / 2, node.y - bckgDimensions[1] / 2, bckgDimensions[0], bckgDimensions[1]);\n        ctx.fillStyle = node.color || \"white\";\n        ctx.fillText(label, node.x, node.y);\n    }\n\n    node.__bckgDimensions = bckgDimensions; // to re-use in nodePointerAreaPaint\n}","import React from 'react';\nimport clsx from 'clsx';\n\nimport { useTheme } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport IconButton from '@material-ui/core/IconButton';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Divider from '@material-ui/core/Divider';\nimport * as MuiIcons from '@material-ui/icons';\nimport { Omit } from '@material-ui/types';\n\nimport { Switch, Route, Link as RouterLink, LinkProps as RouterLinkProps, Redirect, useLocation } from 'react-router-dom';\nimport { QueryClientProvider, useQuery } from 'react-query'\nimport { ReactQueryDevtools } from 'react-query/devtools'\n\nimport { AiidaSettingsContext, defaultRestUrl, isConnected, queryClient, urlPattern } from './aiidaClient';\nimport { useStyles } from './styles';\nimport { AiiDAIcon200, GitBranchIcon } from './icons'\nimport { PageHome } from './PageHome';\nimport { PageNodeExplorer } from './PageNodeExplorer';\nimport { PageProvenanceGraph } from './PageProvenanceGraph';\nimport { useLocalStorage } from './utils'\n\ninterface ListItemLinkProps {\n  icon?: React.ReactElement;\n  primary: string;\n  to: string;\n}\n\nfunction ListItemLink(props: ListItemLinkProps) {\n  const { icon, primary, to } = props;\n  const location = useLocation();\n\n  const renderLink = React.useMemo(\n    () =>\n      React.forwardRef<any, Omit<RouterLinkProps, 'to'>>((itemProps, ref) => (\n        <RouterLink to={to} ref={ref} {...itemProps} />\n      )),\n    [to],\n  );\n\n  return (\n    <li>\n      <ListItem button component={renderLink} selected={to === location.pathname} >\n        {icon ? <ListItemIcon>{icon}</ListItemIcon> : null}\n        <ListItemText primary={primary} />\n      </ListItem>\n    </li>\n  );\n}\n\n\nexport function App({ showDevTools = true }): JSX.Element {\n\n  // style hooks\n  const classes = useStyles();\n  const theme = useTheme();\n\n  // component state for the left menu\n  const [drawerOpen, setDrawerOpen] = React.useState(false);\n  const handleDrawerOpen = () => {\n    setDrawerOpen(true);\n  };\n  const handleDrawerClose = () => {\n    setDrawerOpen(false);\n  };\n\n  // component state for the AiiDA REST URL\n  // the URL is is stored, so that it persists between sessions and page refreshes\n  // we also validate to only allow http/https schema, and no ? which start the query string\n  // TODO better URL validation (to guard against attacks)\n  let [restUrlBase, setRestUrlBase] = useLocalStorage('react-aiida-rest-url', defaultRestUrl);\n  const handleUrlChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setRestUrlBase(event.target.value);\n  };\n\n  return (\n      <div className={classes.root}>\n        <QueryClientProvider client={queryClient}>\n\n          <AppBar\n            position=\"sticky\"\n            className={clsx(classes.appBar, {\n              [classes.appBarShift]: drawerOpen,\n            })}\n          >\n            <Toolbar>\n              <IconButton\n                edge=\"start\"\n                onClick={handleDrawerOpen}\n                className={clsx(classes.menuButton, {\n                  [classes.hide]: drawerOpen,\n                })}\n                color=\"inherit\"\n                aria-label=\"open drawer\">\n                <MuiIcons.Menu />\n              </IconButton>\n              <Typography variant=\"h6\" className={classes.title} id=\"app-header\">AiiDA Dashboard</Typography>\n              {/* TODO periodically update connection status */}\n              <RestUrlConnection url={urlPattern.test(restUrlBase) ? restUrlBase: null } className={classes.inputRestUrlIcon} />\n              <TextField\n                id=\"rest-url\"\n                className={classes.inputRestUrl}\n                label=\"REST URL\"\n                value={restUrlBase}\n                error={!urlPattern.test(restUrlBase)}\n                helperText={urlPattern.test(restUrlBase) ? undefined : 'Invalid URL'}\n                onChange={handleUrlChange}\n                autoComplete={defaultRestUrl}\n                InputProps={{\n                  className: classes.inputRestUrlText\n                }}\n              />\n              <AiiDAIcon200 width={40} height={40} />\n            </Toolbar>\n          </AppBar>\n\n          <Drawer\n            variant=\"permanent\"\n\n            className={clsx(classes.drawer, {\n              [classes.drawerOpen]: drawerOpen,\n              [classes.drawerClose]: !drawerOpen,\n            })}\n            classes={{\n              paper: clsx({\n                [classes.drawerOpen]: drawerOpen,\n                [classes.drawerClose]: !drawerOpen,\n              }),\n            }}\n          >\n            <div className={classes.toolbar}>\n              <IconButton onClick={handleDrawerClose}>\n                {theme.direction === 'rtl' ? <MuiIcons.ChevronRight /> : <MuiIcons.ChevronLeft />}\n              </IconButton>\n            </div>\n            <Divider />\n\n            <List>\n              <ListItemLink to=\"/\" primary=\"Home\" icon={<MuiIcons.Home />} />\n              <ListItemLink to=\"/nodes\" primary=\"Node Explorer\" icon={<MuiIcons.Explore />} />\n              <ListItemLink to=\"/graph\" primary=\"Provenance Graph\" icon={<GitBranchIcon />} />\n            </List>\n\n          </Drawer>\n\n          <AiidaSettingsContext.Provider value={{ baseUrl: urlPattern.test(restUrlBase) ? restUrlBase : null }}>\n\n            <Switch>\n              <Route exact path=\"/\" component={PageHome} />\n              <Route path=\"/nodes\" component={PageNodeExplorer} />\n              <Route path=\"/graph\" component={PageProvenanceGraph} />\n              <Route path=\"/404\" component={NotFound} />\n              <Redirect to=\"/404\" />\n            </Switch>\n\n          </AiidaSettingsContext.Provider>\n\n          {showDevTools ? <ReactQueryDevtools initialIsOpen={false} /> : null}\n        </QueryClientProvider>\n\n      </div>\n  );\n}\n\nfunction NotFound(): JSX.Element {\n  // TODO Offset\n  return (\n    <div>\n      <h1>404 - Not Found!</h1>\n      <RouterLink to=\"/\">\n        Go Home\n      </RouterLink>\n    </div>\n  )\n}\n\n\nfunction RestUrlConnection({url, className = undefined}: {url: string | null, className?: string}): JSX.Element {\n\n  const result = useQuery([url, 'connected'], () => isConnected(url))\n  // TODO hover over info/error?\n  if (result.data) {\n    return < MuiIcons.CheckCircle className={className} />\n  }\n  return < MuiIcons.Cancel color=\"error\" className={className} />\n}\n\nexport default App;","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\nimport './index.css';\nimport {App} from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}