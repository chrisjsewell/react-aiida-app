(this["webpackJsonpreact-aiida-app"]=this["webpackJsonpreact-aiida-app"]||[]).push([[0],{220:function(e,t,a){},467:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(27),c=a.n(r),s=a(102),o=(a(220),a(21)),l=a(13),d=a(23),j=a(5),u=a(34),b=a(559),h=a(558),p=a(104),x=a(147),O=a(83),f=a(572),m=a(472),g=a(474),v=a(476),y=a(544),w=a(547),k=a(560),U=a(561),D=a(562),I=a(563),A=a(564),C=a(526),N=a(565),R=a(35),S=a(173),T=a(573),L=a(166),E=a(33),P=a.n(E),_=a(61),M=new(a(567).a),F="http://127.0.0.1:5000/api/v4",W=new RegExp("^https?:\\/\\/[^\\?]+$"),z=new RegExp("^[-a-zA-Z0-9]+$"),B=i.a.createContext({baseUrl:F});function H(){return(H=Object(_.a)(P.a.mark((function e(t){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,fetch("".concat(t));case 4:return a=e.sent,e.abrupt("return",a.ok);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(_.a)(P.a.mark((function e(t,a,n){var i,r,c,s,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return",null);case 2:return i=20,r=a?"node_type=like=%22".concat(a,"%%22&"):"",e.next=6,fetch("".concat(t,"/nodes/page/").concat(n,"?perpage=").concat(i,"&orderby=-mtime&").concat(r,"attributes=true&attributes_filter=process_label,process_state,exit_status"));case 6:return c=e.sent,s=parseInt(c.headers.get("x-total-count")||"0"),e.next=10,c.json();case 10:return o=e.sent,e.abrupt("return",{nodes:o.data.nodes,totalCount:s,perPage:i});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(_.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,fetch("".concat(t,"/nodes/statistics/"));case 4:return a=e.sent,e.next=7,a.json();case 7:return n=e.sent,e.abrupt("return",n.data);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t){return X.apply(this,arguments)}function X(){return(X=Object(_.a)(P.a.mark((function e(t,a){var n,i,r,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&a){e.next=2;break}return e.abrupt("return",null);case 2:if(z.test(a)){e.next=4;break}throw new TypeError("UUID does not match required format");case 4:return e.next=6,fetch("".concat(t,"/nodes/").concat(a,"?attributes=true&extras=true"));case 6:return r=e.sent,e.next=9,r.json();case 9:return c=e.sent,e.abrupt("return",void 0===(null===(n=c.data)||void 0===n?void 0:n.nodes)?null:Object.values(null===(i=c.data)||void 0===i?void 0:i.nodes)[0]);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(_.a)(P.a.mark((function e(t,a){var n,i,r,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&a){e.next=2;break}return e.abrupt("return",null);case 2:if(z.test(a)){e.next=4;break}throw new TypeError("UUID does not match required format");case 4:return e.next=6,fetch("".concat(t,"/nodes/").concat(a,"/repo/list"));case 6:return r=e.sent,e.next=9,r.json();case 9:return c=e.sent,e.abrupt("return",void 0===(null===(n=c.data)||void 0===n?void 0:n.repo_list)?null:Object.values(null===(i=c.data)||void 0===i?void 0:i.repo_list));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e,t){return Z.apply(this,arguments)}function Z(){return(Z=Object(_.a)(P.a.mark((function e(t,a){var n,i,r,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&a){e.next=2;break}return e.abrupt("return",null);case 2:if(z.test(a)){e.next=4;break}throw new TypeError("UUID does not match required format");case 4:return e.next=6,fetch("".concat(t,"/nodes/").concat(a,"/links/incoming/page/1"));case 6:return r=e.sent,e.next=9,r.json();case 9:return c=e.sent,e.abrupt("return",void 0===(null===(n=c.data)||void 0===n?void 0:n.incoming)?null:Object.values(null===(i=c.data)||void 0===i?void 0:i.incoming));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,t){return $.apply(this,arguments)}function $(){return($=Object(_.a)(P.a.mark((function e(t,a){var n,i,r,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t&&a){e.next=2;break}return e.abrupt("return",null);case 2:if(z.test(a)){e.next=4;break}throw new TypeError("UUID does not match required format");case 4:return e.next=6,fetch("".concat(t,"/nodes/").concat(a,"/links/outgoing/page/1"));case 6:return r=e.sent,e.next=9,r.json();case 9:return c=e.sent,e.abrupt("return",void 0===(null===(n=c.data)||void 0===n?void 0:n.outgoing)?null:Object.values(null===(i=c.data)||void 0===i?void 0:i.outgoing));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q=a(158),ee=a(165),te=240,ae=Object(Q.a)((function(e){return Object(ee.a)({root:{flexGrow:1},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:te,width:"calc(100% - ".concat(te,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},inputRestUrlIcon:{marginRight:e.spacing(1)},inputRestUrl:{marginRight:e.spacing(2),minWidth:200},inputRestUrlText:{color:"white"},hide:{display:"none"},overflowAuto:{overflow:"auto"},drawer:{width:te,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:te,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(o.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(d.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),mainGrid:{paddingTop:e.spacing(1),paddingLeft:e.spacing(10),paddingRight:e.spacing(10)},paper:{padding:e.spacing(2),color:e.palette.text.secondary},formControl:{margin:e.spacing(1),minWidth:200},InlineIcon:{verticalAlign:"middle",display:"inline-flex"},padTop:{paddingTop:e.spacing(2)}})})),ne=a(185),ie=a(1);function re(e){var t=e.width,a=void 0===t?200:t,n=e.height,i=void 0===n?200:n;return Object(ie.jsxs)("svg",{width:a,height:i,viewBox:"0 0 200 200",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",children:[Object(ie.jsxs)("g",{children:[Object(ie.jsx)("title",{children:"background"}),Object(ie.jsx)("rect",{fill:"none",id:"canvas_background",height:"402",width:"582",y:"-1",x:"-1"})]}),Object(ie.jsxs)("g",{children:[Object(ie.jsx)("title",{children:"Layer 1"}),Object(ie.jsx)("g",{id:"svg_1",fill:"#000000",transform:"translate(0, 200) scale(0.1, -0.1)",children:Object(ie.jsx)("path",{fill:"#84D3DB",id:"svg_2",d:"m1369.99536,994.72168c-75,-21.00024 -101,-34.00024 -161,-80.00024c-68,-51.99976 -135,-150.99976 -153,-222.99976l-6,-28l150,0l150,0l0,60c0,33 4,60 9,60c5,0 43,-20 85,-45c42,-24 106,-61 143,-81c81,-45.00006 143,-83.00006 143,-88.00006c0,-3 -24,-18 -52,-33c-71,-39 -116,-65 -225,-129c-51,-30 -94,-54 -97,-54c-3,0 -6,29 -6,65l0,65l-151,0c-166,0 -152,6 -133,-61c14,-50 82,-144.99988 135,-188.99988c87,-72 151,-94 279,-95c88,0 115,4 163,23c119,48 224,165.99988 261,290.99988c30,102 13,250.00006 -36,323.00006c-10,14 -18,31 -18,36c0,16 -127,129.99976 -168,150.99976c-49,24 -158,51.00024 -208,50.00024c-21,0 -68,-8 -104,-18z"})}),Object(ie.jsx)("g",{id:"svg_4",fill:"#000000",transform:"rotate(-120, 96.4437, 55.2508) translate(0, 200) scale(0.1, -0.1)",children:Object(ie.jsx)("path",{fill:"#FFB27C",id:"svg_3",d:"m849.99731,1866.47681c-75,-21 -101,-34 -161,-80c-68,-52 -135,-150.99988 -153,-222.99988l-6,-28l150,0l150,0l0,60c0,33 4,59.99988 9,59.99988c5,0 43,-19.99988 85,-44.99988c42,-24 105.99805,-61 142.99805,-81c81,-45 143,-83 143,-88c0,-3 -24,-18 -52,-33c-71,-39 -116,-65 -224.99805,-129c-51,-30 -94,-54 -97,-54c-3,0 -6,29 -6,65l0,65l-151,0c-166,0 -152,6 -133,-61c14,-50 82,-145 135,-189c87,-72 151,-93.99939 279,-94.99939c87.99805,0 114.99805,4 162.99805,22.99939c119,48 224,166 261,291c30,102 13,250 -36,322.99988c-10,14 -18,31 -18,36c0,16 -127,130 -168,151c-49,24 -158,51 -207.99805,50c-21,0 -68,-8 -104,-18z"})}),Object(ie.jsx)("g",{id:"svg_6",fill:"#000000",transform:"rotate(120, 50.1463, 142.426) translate(0, 200) scale(0.1, -0.1)",children:Object(ie.jsx)("path",{fill:"#A0D58A",id:"svg_5",d:"m387.00516,994.72168c-75,-21.00024 -101,-34.00024 -161,-80.00024c-68,-51.99976 -135,-150.99976 -153,-222.99976l-6,-28l150,0l150,0l0,60c0,33 4,60 9,60c5,0 43,-20 85,-45c42,-24 105.99997,-61 142.99997,-81c81,-45.00006 143,-83.00006 143,-88.00006c0,-3 -24,-18 -52,-33c-71,-39 -116,-65 -224.99997,-129c-51,-30 -94,-54 -97,-54c-3,0 -6,29 -6,65l0,65l-151,0c-166,0 -152,6 -133,-61c14,-50 82,-144.99988 135,-188.99988c87,-72 151,-94 279,-95c87.99997,0 114.99997,4 162.99997,23c119,48 224,165.99988 261,290.99988c30,102 13,250.00006 -36,323.00006c-10,14 -18,31 -18,36c0,16 -127,129.99976 -168,150.99976c-49,24 -158,51.00024 -207.99997,50.00024c-21,0 -68,-8 -104,-18z"})})]})]})}function ce(){return Object(ie.jsx)(ne.a,{children:Object(ie.jsx)("path",{fillRule:"evenodd",d:"M20.322.75a10.75 10.75 0 00-7.373 2.926l-1.304 1.23A23.743 23.743 0 0010.103 6.5H5.066a1.75 1.75 0 00-1.5.85l-2.71 4.514a.75.75 0 00.49 1.12l4.571.963c.039.049.082.096.129.14L8.04 15.96l1.872 1.994c.044.047.091.09.14.129l.963 4.572a.75.75 0 001.12.488l4.514-2.709a1.75 1.75 0 00.85-1.5v-5.038a23.741 23.741 0 001.596-1.542l1.228-1.304a10.75 10.75 0 002.925-7.374V2.499A1.75 1.75 0 0021.498.75h-1.177zM16 15.112c-.333.248-.672.487-1.018.718l-3.393 2.262.678 3.223 3.612-2.167a.25.25 0 00.121-.214v-3.822zm-10.092-2.7L8.17 9.017c.23-.346.47-.685.717-1.017H5.066a.25.25 0 00-.214.121l-2.167 3.612 3.223.679zm8.07-7.644a9.25 9.25 0 016.344-2.518h1.177a.25.25 0 01.25.25v1.176a9.25 9.25 0 01-2.517 6.346l-1.228 1.303a22.248 22.248 0 01-3.854 3.257l-3.288 2.192-1.743-1.858a.764.764 0 00-.034-.034l-1.859-1.744 2.193-3.29a22.248 22.248 0 013.255-3.851l1.304-1.23zM17.5 8a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm-11 13c.9-.9.9-2.6 0-3.5-.9-.9-2.6-.9-3.5 0-1.209 1.209-1.445 3.901-1.49 4.743a.232.232 0 00.247.247c.842-.045 3.534-.281 4.743-1.49z"})})}function se(){return Object(ie.jsxs)(ne.a,{children:[Object(ie.jsx)("path",{fillRule:"evenodd",d:"M5.75 21a1.75 1.75 0 110-3.5 1.75 1.75 0 010 3.5zM2.5 19.25a3.25 3.25 0 106.5 0 3.25 3.25 0 00-6.5 0zM5.75 6.5a1.75 1.75 0 110-3.5 1.75 1.75 0 010 3.5zM2.5 4.75a3.25 3.25 0 106.5 0 3.25 3.25 0 00-6.5 0zM18.25 6.5a1.75 1.75 0 110-3.5 1.75 1.75 0 010 3.5zM15 4.75a3.25 3.25 0 106.5 0 3.25 3.25 0 00-6.5 0z"}),Object(ie.jsx)("path",{fillRule:"evenodd",d:"M5.75 16.75A.75.75 0 006.5 16V8A.75.75 0 005 8v8c0 .414.336.75.75.75z"}),Object(ie.jsx)("path",{fillRule:"evenodd",d:"M17.5 8.75v-1H19v1a3.75 3.75 0 01-3.75 3.75h-7a1.75 1.75 0 00-1.75 1.75H5A3.25 3.25 0 018.25 11h7a2.25 2.25 0 002.25-2.25z"})]})}function oe(e){var t=e.width,a=void 0===t?180:t,n=e.height,i=void 0===n?180:n;return Object(ie.jsx)(ne.a,{children:Object(ie.jsx)("svg",{version:"1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 400 400",width:a,height:i,children:Object(ie.jsxs)("g",{children:[Object(ie.jsx)("line",{y2:"7.9474411",x2:"38",y1:"14.5",x1:"27",style:{stroke:"#9ed700",strokeWidth:1.14999998}}),Object(ie.jsx)("line",{y2:"46.052559",x2:"38",y1:"33.25",x1:"37.825317",style:{stroke:"#00acd9",strokeWidth:1.14999998}}),Object(ie.jsx)("line",{y2:"27",x2:"5",y1:"33.25",x1:"16.174683",style:{stroke:"#7a2dd0",strokeWidth:1.14999998}}),Object(ie.jsx)("line",{y2:"46.052559",x2:"38",y1:"27",x1:"49",style:{stroke:"#00acd9",strokeWidth:1.14999998}}),Object(ie.jsx)("line",{y2:"46.052559",x2:"16",y1:"46.052559",x1:"38",style:{stroke:"#e8e8e8",strokeWidth:2}}),Object(ie.jsx)("line",{y2:"27",x2:"5",y1:"46.052559",x1:"16",style:{stroke:"#7a2dd0",strokeWidth:1.14999998}}),Object(ie.jsx)("line",{y2:"7.9474411",x2:"16",y1:"27",x1:"5",style:{stroke:"#e8e8e8",strokeWidth:2}}),Object(ie.jsx)("line",{y2:"7.9474411",x2:"38",y1:"7.9474411",x1:"16",style:{stroke:"#9ed700",strokeWidth:1.14999998}}),Object(ie.jsx)("line",{y2:"27",x2:"49",y1:"7.9474411",x1:"38",style:{stroke:"#e8e8e8",strokeWidth:2}}),Object(ie.jsx)("circle",{r:"3.5",cy:"27",cx:"49",style:{fill:"#00acd9"}}),Object(ie.jsx)("circle",{r:"3.5",cy:"46.052559",cx:"38",style:{fill:"#00acd9"}}),Object(ie.jsx)("circle",{id:"circle367",r:"3.5",cy:"46.052559",cx:"16",style:{fill:"#7a2dd0"}}),Object(ie.jsx)("circle",{r:"3.5",cy:"27",cx:"5",style:{fill:"#7a2dd0"}}),Object(ie.jsx)("circle",{r:"3.5",cy:"7.9474411",cx:"16",style:{fill:"#9ed700"}}),Object(ie.jsx)("circle",{r:"3.5",cy:"7.9474411",cx:"38",style:{fill:"#9ed700"}}),Object(ie.jsx)("line",{y2:"33.25",x2:"16.174683",y1:"39.5",x1:"27",style:{stroke:"#ff414d",strokeWidth:1}}),Object(ie.jsx)("line",{y2:"20.75",x2:"16.174683",y1:"33.25",x1:"16.174683",style:{stroke:"#ff414d",strokeWidth:1}}),Object(ie.jsx)("line",{y2:"14.5",x2:"27",y1:"20.75",x1:"16.174683",style:{stroke:"#ff414d",strokeWidth:1}}),Object(ie.jsx)("line",{y2:"20.75",x2:"37.825317",y1:"14.5",x1:"27",style:{stroke:"#ff414d",strokeWidth:1}}),Object(ie.jsx)("line",{y2:"33.25",x2:"37.825317",y1:"20.75",x1:"37.825317",style:{stroke:"#ff414d",strokeWidth:1}}),Object(ie.jsx)("line",{y2:"39.5",x2:"27",y1:"33.25",x1:"37.825317",style:{stroke:"#ff414d",strokeWidth:1}}),Object(ie.jsx)("circle",{r:"2.5",cy:"39.5",cx:"27",style:{fill:"#ff414d"}}),Object(ie.jsx)("circle",{r:"2.5",cy:"33.25",cx:"16.174683",style:{fill:"#ff414d"}}),Object(ie.jsx)("circle",{r:"2.5",cy:"20.75",cx:"16.174683",style:{fill:"#ff414d"}}),Object(ie.jsx)("circle",{r:"2.5",cy:"14.5",cx:"27",style:{fill:"#ff414d"}}),Object(ie.jsx)("circle",{r:"2.5",cy:"20.75",cx:"37.825317",style:{fill:"#ff414d"}}),Object(ie.jsx)("circle",{r:"2.5",cy:"33.25",cx:"37.825317",style:{fill:"#ff414d"}})]})})})}var le=a(525),de=a(141),je=a(569),ue=a(570);function be(){var e=ae();return Object(ie.jsxs)(le.a,{container:!0,spacing:2,className:e.mainGrid,children:[Object(ie.jsx)(le.a,{item:!0,xs:12,sm:12,md:6,children:Object(ie.jsx)(de.a,{variant:"outlined",className:e.paper,children:Object(ie.jsx)(he,{})})}),Object(ie.jsx)(le.a,{item:!0,xs:12,sm:12,md:6,children:Object(ie.jsx)(de.a,{variant:"outlined",className:e.paper,children:Object(ie.jsx)(pe,{})})}),Object(ie.jsx)(le.a,{item:!0,xs:12,sm:12,md:12,children:Object(ie.jsx)(de.a,{variant:"outlined",className:e.paper,children:Object(ie.jsx)(xe,{})})})]})}function he(){return Object(ie.jsxs)("div",{children:[Object(ie.jsx)("h2",{children:"Introduction"}),Object(ie.jsxs)("p",{children:["This is a demonstration of the AiiDA Dashboard:",Object(ie.jsx)("br",{}),"A web-based UI for interfacing with AiiDA, that can also act as an extension for JupyterLab."]}),Object(ie.jsx)("p",{children:"AiiDA Dashboard uses industry leading libraries, to create a beautiful and responsive UI:"}),Object(ie.jsxs)("ul",{children:[Object(ie.jsxs)("li",{children:[Object(ie.jsx)("a",{href:"https://reactjs.org/",children:"React"}),": A library for building user interfaces, maintained by Facebook and with users including Whatsapp, Dropbox, Uber and Netflix."]}),Object(ie.jsxs)("li",{children:[Object(ie.jsx)("a",{href:"https://material-ui.com",children:"Material-UI"}),": A React component library that implements ",Object(ie.jsx)("a",{href:"https://material.io/design",children:"Google\u2019s Material Design"})," guidelines."]}),Object(ie.jsxs)("li",{children:[Object(ie.jsx)("a",{href:"https://react-query.tanstack.com/",children:"react-query"}),": A React component for synchronizing server data (from AiiDA) with the UI."]})]}),Object(ie.jsxs)("p",{children:["AiiDA Dashboard can be used as a standalone Web UI, or it also provides React components and facilitates wrapping into a JupyterLab ",Object(ie.jsx)("a",{href:"https://jupyterlab.readthedocs.io/en/stable/extension/virtualdom.html",children:"extension widget"}),"."]}),Object(ie.jsxs)("p",{children:["Alongside work on an ",Object(ie.jsx)("a",{href:"https://github.com/aiidateam/AEP/pull/24",children:"Extended REST API"}),", it is hoped that this will offer not just ways to explore your profiles, but also to actively interact them: creating/adding to groups, composing/running workchains, etc."]})]})}function pe(){var e=ae();return Object(ie.jsxs)("div",{children:[Object(ie.jsx)("h2",{children:"Getting Started"}),Object(ie.jsx)("p",{children:"To use this application, you need to be able to connect to a running AiiDA REST API server."}),Object(ie.jsxs)(je.a,{variant:"outlined",severity:"info",children:["If you want to try out this app but don't have your own AiiDA profile, you can use this demonstration server: ",Object(ie.jsx)("a",{href:"https://15.188.110.176:5000/api/v4",children:"https://15.188.110.176:5000/api/v4"}),", although note currently you will first need to open this address in a separate tab and accept the security certificate (under Advanced)."]}),Object(ie.jsx)("p",{children:"To start a server for your own profile, you must have aiida-core installed with the REST dependencies:"}),Object(ie.jsx)(ue.a,{language:"bash",children:"$ pip install aiida-core[rest]~=1.6.3"}),Object(ie.jsx)("p",{children:"Then you can start your REST server:"}),Object(ie.jsx)(ue.a,{language:"bash",children:"$ verdi -p myprofile restapi\n * REST API running on http://127.0.0.1:5000/api/v4"}),Object(ie.jsxs)("p",{children:['Take this URL and paste it into the "REST URL" box at the top-right of this page. If a connection is available, then you should see the icon turn to:  ',Object(ie.jsx)(C.a,{className:e.InlineIcon})]}),Object(ie.jsx)("p",{children:"Now try the tabs on the left of this page!"})]})}function xe(){return Object(ie.jsxs)("div",{children:[Object(ie.jsx)("h2",{children:"Project Discussion"}),Object(ie.jsxs)("p",{children:["Source repository: ",Object(ie.jsx)("a",{href:"https://github.com/chrisjsewell/react-aiida-app",children:"https://github.com/chrisjsewell/react-aiida-app"})]}),Object(ie.jsxs)("p",{children:["This project is a continuation of ",Object(ie.jsx)("a",{href:"https://github.com/chrisjsewell/jlab_aiidatree",children:"jlab_aiidatree"}),", in which we built a working prototype for a JupyterLab extension to interact with AiiDA."]}),Object(ie.jsxs)("p",{children:["During development of ",Object(ie.jsx)("code",{children:"jlab_aiidatree"})," it was noted that you can embed ",Object(ie.jsx)("a",{href:"https://reactjs.org/",children:"React components"})," inside of JupyterLab (see ",Object(ie.jsx)("a",{href:"https://jupyterlab.readthedocs.io/en/stable/extension/virtualdom.html",children:"JupyterLab/React"}),")."]}),Object(ie.jsx)("p",{children:"The goal, therefore, is that we can develop this package as a standalone app (which could also be utilised directly via a web server), but also use it as a dependency to generate most of the JupyterLab extension, via React components."}),Object(ie.jsx)("p",{children:"The benefit of also using th app within JupyterLab, is:"}),Object(ie.jsxs)("ol",{type:"1",children:[Object(ie.jsx)("li",{children:"It provides a platform within which to run the app locally, without having to host it directly"}),Object(ie.jsx)("li",{children:"It allows us an alternate route to interface with AiiDA: via the \u201cprivate\u201d REST API interface between the JupyterLab backend and frontend. Using this REST API, will allow us easy access to parts of the AiiDA API that are yet to be exposed in REST, whilst maintaining that formal protocol (enforcing separation of concerns). We can then use this to essentially prototype additions to the AiiDA REST API."}),Object(ie.jsx)("li",{children:"It provides the possible to integrate with other aspects of the Jupyter framework (e.g.\xa0Notebooks)"})]}),Object(ie.jsx)("h3",{id:"about-react",children:"About React"}),Object(ie.jsx)("p",{children:"React is an industry leading library, for creating beautiful and responsive UIs, maintained by Facebook and with users including Whatsapp, Dropbox, Uber and Netflix. We also utilise other \u201cbest-practice\u201d React components:"}),Object(ie.jsxs)("ul",{children:[Object(ie.jsxs)("li",{children:[Object(ie.jsx)("a",{href:"https://material-ui.com",children:"Material-UI"}),": A React component library that implements Google\u2019s ",Object(ie.jsx)("a",{href:"https://material.io/design",children:"Material Design guidelines"})]}),Object(ie.jsxs)("li",{children:[Object(ie.jsx)("a",{href:"https://react-query.tanstack.com/",children:"react-query"}),": A React component for synchronizing server data (from AiiDA) with the UI."]})]}),Object(ie.jsxs)("p",{children:["React itself is really user-friendly to get started with, even with only a small familiarity with HTML and JavaScript, see ",Object(ie.jsx)("a",{href:"https://reactjs.org/tutorial/tutorial.html",children:"https://reactjs.org/tutorial/tutorial.html"}),". Once learned, it is also incredibly intuitive to generate web elements with, using the ",Object(ie.jsxs)("a",{href:"https://reactjs.org/docs/introducing-jsx.html",children:[Object(ie.jsx)("code",{children:".jsx"})," file format"]}),". For example a simple React component would look like:"]}),Object(ie.jsx)(ue.a,{language:"jsx",children:"function MyComponent(props) {\n  return (\n    <div>\n      <h1>Hello, world!</h1>\n      <p>Here is a dynamic value: {props.value}</p>\n    </div>\n  )\n}"}),Object(ie.jsx)("h3",{id:"this-app-vs-materials-cloud-explore",children:"This app vs Materials Cloud Explore"}),Object(ie.jsxs)("p",{children:[Object(ie.jsx)("b",{children:"Update:"})," Materials Cloud is in fact now looking to move to React."]}),Object(ie.jsxs)("p",{children:["Note, initial features of this app are quite similar to ",Object(ie.jsx)("a",{href:"https://www.materialscloud.org/explore/connect",children:"https://www.materialscloud.org/explore/connect"}),": using the AiiDA REST API as a backend for visualising its data. However, this is built with ",Object(ie.jsx)("a",{href:"https://angularjs.org/",children:"https://angularjs.org/"})," which, although also well used in industry, has two major drawbacks for our use case:"]}),Object(ie.jsxs)("ol",{type:"1",children:[Object(ie.jsx)("li",{children:"You cannot integrate it with JupyterLab (see benefits above)"}),Object(ie.jsx)("li",{children:"It does not have the re-usable component infrastructure of React, which should allow us to eventually build an extensible app with \u201cpluggable\u201d extensions."})]}),Object(ie.jsx)("h3",{id:"this-app-vs-aiidalab",children:"This app vs AiiDALab"}),Object(ie.jsxs)("p",{children:[Object(ie.jsx)("a",{href:"https://www.materialscloud.org/work/aiidalab",children:"AiiDALab"})," uses the Jupyter Notebook server to build its frontend, via ",Object(ie.jsx)("a",{href:"https://ipywidgets.readthedocs.io",children:"ipywidgets"}),", which dynamically generates the HTML/Javascript from python code cells, and appmode/voila which executes the Notebook on page load, then converts the notebook interface to look more like a web app (hiding code cells, etc). Note, despite its name, it does not use JupyterLab per se."]}),Object(ie.jsx)("p",{children:"The benefits of this approach, is that:"}),Object(ie.jsxs)("ol",{type:"1",children:[Object(ie.jsx)("li",{children:"You can code everything in Python/Jupyter Notebooks, which is obviously the background of many working on AiiDA (being a Python package), albeit that, if you want to do anything substantial with these apps you inevitably have to learn some HTML/JavaScript."}),Object(ie.jsx)("li",{children:"You can interface directly with the AiiDA Python API"})]}),Object(ie.jsx)("p",{children:"The disadvantage though is that the apps which it creates are substantially limited in the user interfaces (UI) and user experience (UX) they can create."}),Object(ie.jsxs)("ol",{type:"1",children:[Object(ie.jsx)("li",{children:"On every page load you need to first execute the notebook, then render it, meaning loads times are extremely poor by web standards."}),Object(ie.jsx)("li",{children:"You are restricted by the semantics/layout of the Notebook, i.e.\xa0each app has to be a set of separate pages and in each page you have a set of vertically sequential cells."}),Object(ie.jsx)("li",{children:"You are restricted by the semantics/functionality of ipywidgets, by industry standard, a very niche/bespoke tool. In practice, you end up taking a lot of time to learn/create a lot of HTML widgets that have little to no practical reusability, rather than being able to utilise the massive React ecosystem of libraries and components."})]})]})}var Oe=a(105),fe=a(148),me=a(74),ge=a(146),ve=a(577),ye=a(553),we=a(554),ke=a(80),Ue=a.n(ke),De=a(471),Ie=a(171),Ae=a.n(Ie),Ce=a(576),Ne=a(84),Re=a(548),Se=a(527),Te=a(528),Le=a(529),Ee=a(530),Pe=a(531),_e=a(532),Me=a(533),Fe=a(534),We=a(535),ze=a(536),Be=a(537),He=a(538),Je=a(539),Ge=a(540),Ye=a(541),Xe=a(542),qe=a(545),Ve=a(546),Ze=a(549),Ke=a(550),$e=a(551),Qe=a(552),et=a(543),tt=a(568),at=a(142),nt=a(580),it=a(182),rt=a(172),ct=a.n(rt),st=Object(Q.a)((function(e){return Object(ee.a)({tree:{width:"100%",maxWidth:520,backgroundColor:e.palette.background.paper},refresh:{marginRight:e.spacing(1)},pagination:{paddingTop:e.spacing(2),paddingBottom:e.spacing(1)},listChip:{marginLeft:e.spacing(1),marginBottom:e.spacing(1),float:"right"},item:{maxWidth:480,overflow:"hidden"},nested1:{paddingLeft:e.spacing(4)},nested2:{paddingLeft:e.spacing(8)}})})),ot={mouseX:null,mouseY:null};function lt(e){var t=e.nodePrefix,a=st(),r=i.a.useState(1),c=Object(l.a)(r,2),s=c[0],o=c[1],d=Object(n.useContext)(B),j=Object(T.a)([d.baseUrl,"nodes",t,s],(function(){return function(e,t,a){return J.apply(this,arguments)}(d.baseUrl,t,s)}),{enabled:null!==d.baseUrl}),u=Object(ie.jsx)(De.a,{}),b=1;if(j.isIdle||null===j.data)u=Object(ie.jsx)(je.a,{severity:"info",icon:Object(ie.jsx)(Se.a,{}),children:"Disabled"});else if(void 0!==j.data)b=Math.ceil(j.data.totalCount/j.data.perPage),u=Object(ie.jsx)(m.a,{component:"nav","aria-label":"main aiida tree",children:j.data.nodes.map((function(e){var t,a,n,i;return Object(ie.jsx)(jt,{pk:e.id,uuid:e.uuid,header:"".concat(e.id," ").concat((null===(t=e.attributes)||void 0===t?void 0:t.process_label)||e.label||""),elementName:e.node_type.split(".").slice(0,2).join("."),info:"".concat(e.mtime,", ").concat(e.node_type,", ").concat(e.process_type||""),tooltip:"UUID: ".concat(e.uuid),procLabel:null===(a=e.attributes)||void 0===a?void 0:a.process_label,procState:null===(n=e.attributes)||void 0===n?void 0:n.process_state,procExit:null===(i=e.attributes)||void 0===i?void 0:i.exit_status})}))});else if(j.isError){var h=j.error;u=Object(ie.jsx)(je.a,{severity:"error",children:h.message})}var p=Object(ie.jsx)("span",{});if(j.dataUpdatedAt){var x=new Date(j.dataUpdatedAt);p=Object(ie.jsxs)("span",{children:["Updated: ",x.toLocaleString()]})}return Object(ie.jsxs)("div",{className:a.tree,children:[Object(ie.jsx)(Ne.a,{variant:"outlined",color:"primary",className:a.refresh,startIcon:Object(ie.jsx)(Te.a,{}),onClick:function(){j.refetch()},children:"Refresh"}),p,Object(ie.jsx)(tt.a,{className:a.pagination,color:"primary",count:b,page:s,onChange:function(e,t){o(t)}}),u]})}var dt={default:Object(ie.jsx)(Le.a,{}),folder:Object(ie.jsx)(Ee.a,{}),"data.array":Object(ie.jsx)(Pe.a,{}),"data.bool":Object(ie.jsx)(C.a,{}),"data.cif":Object(ie.jsx)(_e.a,{}),"data.code":Object(ie.jsx)(Me.a,{}),"data.dict":Object(ie.jsx)(Fe.a,{}),"data.float":Object(ie.jsx)(We.a,{}),"data.folder":Object(ie.jsx)(Ee.a,{}),"data.int":Object(ie.jsx)(ze.a,{}),"data.list":Object(ie.jsx)(Be.a,{}),"data.numeric":Object(ie.jsx)(He.a,{}),"data.orbital":Object(ie.jsx)(Je.a,{}),"data.remote":Object(ie.jsx)(Ge.a,{}),"data.str":Object(ie.jsx)(Ye.a,{}),"data.structure":Object(ie.jsx)(Xe.a,{}),"process.calculation":Object(ie.jsx)(ce,{}),"process.process":Object(ie.jsx)(ce,{}),"process.workflow":Object(ie.jsx)(se,{})};function jt(e){var t=st(),a=void 0===e.elementName?"default":e.elementName,n=dt[a]||Object(ie.jsx)(Le.a,{}),r=i.a.useState(!1),c=Object(l.a)(r,2),s=c[0],o=c[1],d=i.a.useState(ot),j=Object(l.a)(d,2),u=j[0],b=j[1],h=function(e){e.preventDefault(),e.stopPropagation(),b(ot)};void 0!==e.tooltip&&(n=Object(ie.jsx)(at.a,{title:Object(ie.jsx)(i.a.Fragment,{children:Object(ie.jsx)("p",{children:e.tooltip})}),children:Object(ie.jsx)("span",{children:n})}));var p=Object(ie.jsx)("span",{children:e.header});return["excepted","killed"].includes(e.procState||"")?p=Object(ie.jsxs)("span",{children:[e.header,Object(ie.jsx)(nt.a,{className:t.listChip,label:"".concat(e.procState," [").concat(e.procExit,"]"),variant:"outlined",color:"secondary"})]}):e.procState&&(p=Object(ie.jsxs)("span",{children:[e.header,Object(ie.jsx)(nt.a,{className:t.listChip,label:"".concat(e.procState," [").concat(e.procExit,"]"),variant:"outlined",color:"primary"})]})),Object(ie.jsxs)(i.a.Fragment,{children:[Object(ie.jsxs)(g.a,{button:!0,onClick:function(){o(!s)},onContextMenu:function(e){e.preventDefault(),b({mouseX:e.clientX-2,mouseY:e.clientY-4})},className:e.nested?t.nested2:void 0,children:[Object(ie.jsx)(et.a,{children:Object(ie.jsx)(Ce.a,{children:n})}),Object(ie.jsx)(y.a,{className:t.item,primary:p,secondary:e.info}),Object(ie.jsxs)(it.a,{keepMounted:!0,open:null!==u.mouseY,onClose:h,anchorReference:"anchorPosition",anchorPosition:null!==u.mouseY&&null!==u.mouseX?{top:u.mouseY,left:u.mouseX}:void 0,children:[Object(ie.jsx)(g.a,{children:Object(ie.jsxs)("b",{children:["PK ",e.pk," Menu"]})}),Object(ie.jsx)(me.a,{onClick:function(t){t.preventDefault(),t.stopPropagation(),b(ot),ct()("".concat(e.uuid))},children:"Copy UUID to Clipboard"}),Object(ie.jsx)(me.a,{onClick:h,children:"Close"})]}),e.nested?null:s?Object(ie.jsx)(qe.a,{}):Object(ie.jsx)(Ve.a,{})]},e.pk),e.nested?null:Object(ie.jsx)(ut,{nodeUUID:e.uuid,open:s}),Object(ie.jsx)(w.a,{light:!0})]})}function ut(e){var t=e.nodeUUID,a=e.open,n=st(),r=i.a.useState(!1),c=Object(l.a)(r,2),s=c[0],o=c[1],d=i.a.useState(!1),j=Object(l.a)(d,2),u=j[0],b=j[1],h=i.a.useState(!1),p=Object(l.a)(h,2),x=p[0],O=p[1];return Object(ie.jsx)(Re.a,{in:a,timeout:"auto",children:Object(ie.jsxs)(m.a,{component:"div",disablePadding:!0,children:[Object(ie.jsxs)(g.a,{button:!0,onClick:function(){o(!s)},className:n.nested1,children:[Object(ie.jsx)(v.a,{children:Object(ie.jsx)(Ee.a,{})}),Object(ie.jsx)(y.a,{primary:"Repository"}),s?Object(ie.jsx)(qe.a,{}):Object(ie.jsx)(Ve.a,{})]}),Object(ie.jsx)(Re.a,{in:s,mountOnEnter:!0,children:Object(ie.jsx)(bt,{nodeUUID:t})}),Object(ie.jsxs)(g.a,{button:!0,onClick:function(){b(!u)},className:n.nested1,children:[Object(ie.jsx)(v.a,{children:Object(ie.jsx)(Ze.a,{})}),Object(ie.jsx)(y.a,{primary:"Incoming"}),u?Object(ie.jsx)(qe.a,{}):Object(ie.jsx)(Ve.a,{})]}),Object(ie.jsx)(Re.a,{in:u,mountOnEnter:!0,children:Object(ie.jsx)(ht,{nodeUUID:t})}),Object(ie.jsxs)(g.a,{button:!0,onClick:function(){O(!x)},className:n.nested1,children:[Object(ie.jsx)(v.a,{children:Object(ie.jsx)(Ke.a,{})}),Object(ie.jsx)(y.a,{primary:"Outgoing"}),x?Object(ie.jsx)(qe.a,{}):Object(ie.jsx)(Ve.a,{})]}),Object(ie.jsx)(Re.a,{in:x,mountOnEnter:!0,children:Object(ie.jsx)(pt,{nodeUUID:t})})]})})}function bt(e){var t=e.nodeUUID,a=st(),i=Object(n.useContext)(B),r=Object(T.a)([i.baseUrl,"nodeRepolist",t],(function(){return function(e,t){return q.apply(this,arguments)}(i.baseUrl,t)}),{enabled:null!==i.baseUrl}),c=Object(ie.jsx)(De.a,{});if(r.isIdle||null===r.data)c=Object(ie.jsx)(je.a,{severity:"info",icon:Object(ie.jsx)(Se.a,{}),children:"Disabled"});else if(void 0!==r.data)c=Object(ie.jsx)(m.a,{component:"nav","aria-label":"main aiida repo",children:r.data.map((function(e){return Object(ie.jsxs)(g.a,{className:a.nested2,children:[Object(ie.jsx)(v.a,{children:"DIRECTORY"===e.type?Object(ie.jsx)($e.a,{}):Object(ie.jsx)(Qe.a,{})}),Object(ie.jsx)(y.a,{primary:e.name})]})}))});else if(r.isError){var s=r.error;c=Object(ie.jsx)(je.a,{severity:"error",children:s.message})}return c}function ht(e){var t=e.nodeUUID,a=Object(n.useContext)(B),i=Object(T.a)([a.baseUrl,"nodeIncoming",t],(function(){return V(a.baseUrl,t)}),{enabled:null!==a.baseUrl}),r=Object(ie.jsx)(De.a,{});if(i.isIdle||null===i.data)r=Object(ie.jsx)(je.a,{severity:"info",icon:Object(ie.jsx)(Se.a,{}),children:"Disabled"});else if(void 0!==i.data)r=Object(ie.jsx)(m.a,{component:"nav","aria-label":"main aiida incoming",children:i.data.map((function(e){return Object(ie.jsx)(jt,{nested:!0,pk:e.id,uuid:e.uuid,header:"".concat(e.id," ").concat(e.link_type.toUpperCase()," ").concat(e.link_label),elementName:e.node_type.split(".").slice(0,2).join("."),info:"".concat(e.mtime,", ").concat(e.node_type,", ").concat(e.process_type||""),tooltip:"UUID: ".concat(e.uuid)})}))});else if(i.isError){var c=i.error;r=Object(ie.jsx)(je.a,{severity:"error",children:c.message})}return r}function pt(e){var t=e.nodeUUID,a=Object(n.useContext)(B),i=Object(T.a)([a.baseUrl,"nodeOutgoing",t],(function(){return K(a.baseUrl,t)}),{enabled:null!==a.baseUrl}),r=Object(ie.jsx)(De.a,{});if(i.isIdle||null===i.data)r=Object(ie.jsx)(je.a,{severity:"info",icon:Object(ie.jsx)(Se.a,{}),children:"Disabled"});else if(void 0!==i.data)r=Object(ie.jsx)(m.a,{component:"nav","aria-label":"main aiida incoming",children:i.data.map((function(e){return Object(ie.jsx)(jt,{nested:!0,pk:e.id,uuid:e.uuid,header:"".concat(e.id," ").concat(e.link_type.toUpperCase()," ").concat(e.link_label),elementName:e.node_type.split(".").slice(0,2).join("."),info:"".concat(e.mtime,", ").concat(e.node_type,", ").concat(e.process_type||""),tooltip:"UUID: ".concat(e.uuid)})}))});else if(i.isError){var c=i.error;r=Object(ie.jsx)(je.a,{severity:"error",children:c.message})}return r}function xt(e,t){var a=Object(n.useState)((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.log(n),t}})),i=Object(l.a)(a,2),r=i[0],c=i[1];return[r,function(t){try{var a=t instanceof Function?t(r):t;c(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.log(n)}}]}function Ot(){var e=ae(),t=xt("aiida-node-explorer-type-prefix",""),a=Object(l.a)(t,2),n=a[0],i=a[1],r=xt("aiida-node-explorer-field-uuid",null),c=Object(l.a)(r,2),s=c[0],o=c[1],d=xt("aiida-node-explorer-expanded",["intro"]),j=Object(l.a)(d,2),u=j[0],b=j[1];function h(e,t){var a=new Set(u);t?a.add(e):a.delete(e),b(Array.from(a))}return Object(ie.jsxs)(le.a,{container:!0,spacing:2,className:e.mainGrid,direction:"row-reverse",children:[Object(ie.jsx)(le.a,{item:!0,xs:12,sm:12,md:6,children:Object(ie.jsxs)(de.a,{variant:"outlined",className:e.paper,children:[Object(ie.jsxs)(ve.a,{defaultExpanded:u.includes("intro"),onChange:function(e,t){h("intro",t)},children:[Object(ie.jsx)(ye.a,{expandIcon:Object(ie.jsx)(Ue.a,{}),children:Object(ie.jsx)("h3",{children:"AiiDA Node Explorer"})}),Object(ie.jsx)(we.a,{children:Object(ie.jsx)(ft,{})})]}),Object(ie.jsxs)(ve.a,{defaultExpanded:u.includes("filters"),onChange:function(e,t){h("filters",t)},children:[Object(ie.jsx)(ye.a,{expandIcon:Object(ie.jsx)(Ue.a,{}),children:Object(ie.jsx)("h3",{children:"Filters"})}),Object(ie.jsx)(we.a,{children:Object(ie.jsx)(gt,{nodePrefix:n,setnodePrefix:i})})]}),Object(ie.jsxs)(ve.a,{defaultExpanded:u.includes("fields"),onChange:function(e,t){h("fields",t)},children:[Object(ie.jsx)(ye.a,{expandIcon:Object(ie.jsx)(Ue.a,{}),children:Object(ie.jsx)("h3",{children:"Database Fields"})}),Object(ie.jsx)(we.a,{className:e.overflowAuto,children:Object(ie.jsx)(vt,{nodeFieldsUUID:s,setnodeFieldsUUID:o})})]}),Object(ie.jsxs)(ve.a,{defaultExpanded:u.includes("files"),onChange:function(e,t){h("files",t)},children:[Object(ie.jsx)(ye.a,{expandIcon:Object(ie.jsx)(Ue.a,{}),children:Object(ie.jsx)("h3",{children:"File Contents"})}),Object(ie.jsx)(we.a,{children:"TODO ..."})]})]})}),Object(ie.jsx)(le.a,{item:!0,xs:12,sm:12,md:6,children:Object(ie.jsx)(de.a,{variant:"outlined",className:e.paper,children:Object(ie.jsx)(lt,{nodePrefix:n})})})]})}function ft(){return Object(ie.jsxs)("div",{children:[Object(ie.jsx)("p",{children:"The node explorer allows you to visualise the nodes in your AiiDA profile as a filtered tree."}),Object(ie.jsx)("p",{children:"Use the filter section below to select which node type you want to explore."}),Object(ie.jsx)("p",{children:'You can right-click on a node to see additional actions, including copying its UUID to the clipboard. You can use this to show all of if its content in the "Database Fields" section.'})]})}var mt={"":null,"data.":null,"data.array.":null,"data.bool.":null,"data.cif.":null,"data.code.":null,"data.dict.":null,"data.float.":null,"data.folder.":null,"data.int.":null,"data.list.":null,"data.numeric.":null,"data.orbital.":null,"data.remote.":null,"data.structure.":null,"process.":null,"process.calculation.":null,"process.workflow.":null};function gt(e){var t=e.nodePrefix,a=e.setnodePrefix,r=ae(),c=Object(n.useContext)(B),s=Object(T.a)([c.baseUrl,"statistics"],(function(){return function(e){return G.apply(this,arguments)}(c.baseUrl)}),{enabled:null!==c.baseUrl}),o=mt;return s.data&&((o=s.data.types)[""]=s.data.total,o["data."]=null,o["process."]=null,o["process.calculation."]=null,o["process.workflow."]=null),Object(ie.jsx)(i.a.Fragment,{children:Object(ie.jsxs)(Oe.a,{className:r.formControl,children:[Object(ie.jsx)(fe.a,{id:"node-prefix-select-label",children:"Node Type Prefix"}),Object(ie.jsx)(ge.a,{labelId:"node-prefix-select-label",id:"node-prefix-select",value:t,onChange:function(e){a(e.target.value)},children:Object.entries(o).sort().map((function(e){var t=Object(l.a)(e,2),a=t[0],n=t[1];return Object(ie.jsx)(me.a,{value:a,children:null===n?a:"".concat(a||"ALL"," (").concat(n,")")})}))})]})})}function vt(e){var t=e.nodeFieldsUUID,a=e.setnodeFieldsUUID,i=ae(),r=Object(n.useContext)(B),c=Object(T.a)([r.baseUrl,"node",t],(function(){return Y(r.baseUrl,t)}),{enabled:null!==r.baseUrl}),s=null;return c.data?s=Object(ie.jsx)(Ae.a,{src:c.data,collapseStringsAfterLength:40}):c.isFetching&&(s=Object(ie.jsx)(De.a,{})),Object(ie.jsxs)(le.a,{container:!0,children:[Object(ie.jsx)(le.a,{xs:12,children:Object(ie.jsx)(x.a,{label:"UUID",value:t,onChange:function(e){a(e.target.value)},error:!!c.error,helperText:c.error?"".concat(c.error):void 0,fullWidth:!0})}),Object(ie.jsx)(le.a,{xs:12,className:i.padTop,children:s})]})}var yt=a(25),wt=a(578),kt=a(181),Ut=a(574),Dt=a(177);function It(){var e=ae(),t=xt("aiida-provenence-graph-root-uuid",null),a=Object(l.a)(t,2),n=a[0],i=a[1],r=xt("aiida-provenence-graph-dag-mode","lr"),c=Object(l.a)(r,2),s=c[0],o=c[1],d=xt("aiida-provenence-graph-dag-level-dist",50),j=Object(l.a)(d,2),u=j[0],b=j[1];return Object(ie.jsxs)(le.a,{container:!0,spacing:2,className:e.mainGrid,direction:"row-reverse",children:[Object(ie.jsx)(le.a,{item:!0,xs:12,sm:12,md:6,children:Object(ie.jsx)(de.a,{variant:"outlined",className:e.paper,children:Object(ie.jsxs)(ve.a,{defaultExpanded:!0,children:[Object(ie.jsx)(ye.a,{expandIcon:Object(ie.jsx)(Ue.a,{}),children:Object(ie.jsx)("h3",{children:"Provenance Graph Visualisation"})}),Object(ie.jsx)(we.a,{children:Object(ie.jsx)(At,{})})]})})}),Object(ie.jsx)(le.a,{item:!0,xs:12,sm:12,md:6,children:Object(ie.jsxs)(de.a,{variant:"outlined",className:e.paper,children:[Object(ie.jsx)(x.a,{label:"Root UUID",value:n||"",onChange:function(e){i(e.target.value)},error:!!n&&!z.test(n),fullWidth:!0}),Object(ie.jsxs)(Oe.a,{className:e.formControl,children:[Object(ie.jsx)(fe.a,{id:"dag-mode-select-label",children:"DAG Mode"}),Object(ie.jsx)(ge.a,{labelId:"dag-mode-select-label",id:"dag-mode-select",value:s,onChange:function(e){o(e.target.value)},children:["td","bu","lr","rl","radialout","radialin"].map((function(e){return Object(ie.jsx)(me.a,{value:e,children:e})}))}),Object(ie.jsx)(p.a,{id:"discrete-slider",gutterBottom:!0,children:"DAG Level Distance"}),Object(ie.jsx)(wt.a,{defaultValue:u,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:10,marks:!0,min:10,max:200,onChange:function(e,t){b(t)}})]}),Object(ie.jsx)(Ct,{nodeUUID:n,dagMode:s,dagLevelDistance:u})]})})]})}function At(){return Object(ie.jsxs)("div",{children:[Object(ie.jsx)("p",{children:"This is a work in progress!"}),Object(ie.jsx)("p",{children:"Input a root node UUID and you will see a visualisation of its local provenance graph."}),Object(ie.jsx)("p",{children:"Hover over a node or link to see more information about it (you may have to click on the area first)."}),Object(ie.jsx)("p",{children:"Eventually it is intended to add features like click-to-expand."})]})}function Ct(e){var t=e.nodeUUID,a=e.dagMode,i=e.dagLevelDistance,r=Object(n.useRef)(),c=Object(n.useContext)(B),s=Object(T.a)([c.baseUrl,"nodeIncoming",t],(function(){return V(c.baseUrl,t)}),{enabled:null!==c.baseUrl}),o=Object(T.a)([c.baseUrl,"nodeOutgoing",t],(function(){return K(c.baseUrl,t)}),{enabled:null!==c.baseUrl});Object(n.useEffect)((function(){var e=r.current;void 0!==e&&(e.d3Force("charge",null),e.d3Force("collision",Object(Ut.a)(15)))}),[s,o]);var l=[{id:"root",name:"root",label:"ROOT",val:2,color:"red"}],d=[];s.data&&(l.push.apply(l,Object(yt.a)(s.data.map((function(e){return Nt(e)})))),d.push.apply(d,Object(yt.a)(s.data.map((function(e){return{target:"root",source:"".concat(e.id),name:"".concat(e.link_label)}}))))),o.data&&(l.push.apply(l,Object(yt.a)(o.data.map((function(e){return Nt(e)})))),d.push.apply(d,Object(yt.a)(o.data.map((function(e){return{source:"root",target:"".concat(e.id),name:"".concat(e.link_label)}})))));var j={nodes:l,links:d};return Object(ie.jsx)(Dt.SizeMe,{children:function(e){var t=e.size;return Object(ie.jsx)(kt.a,{ref:r,graphData:j,width:null===t.width?void 0:t.width,height:null===t.height?void 0:t.height,dagMode:a,dagLevelDistance:i,nodeCanvasObject:Rt,linkDirectionalArrowLength:3.5,linkDirectionalArrowRelPos:1})}})}function Nt(e){var t=e.node_type.split(".");return t.pop(),{id:"".concat(e.id),name:"".concat(e.id).concat(e.process_type?", "+e.process_type:""),label:t.pop(),val:40,color:"blue"}}function Rt(e,t,a){var n="".concat(e.label||""),i=12/a;t.font="".concat(i,"px Sans-Serif");var r=[t.measureText(n).width,i].map((function(e){return e+.2*i}));t.textAlign="center",t.textBaseline="middle",t.strokeStyle="rgba(0, 0, 0, 0.1)",void 0!==e.x&&void 0!==e.y&&(e.fillColor&&(t.fillStyle=e.fillColor||"rgba(255, 255, 255, 0.8)",t.fillRect(e.x-r[0]/2,e.y-r[1]/2,r[0],r[1])),t.strokeRect(e.x-r[0]/2,e.y-r[1]/2,r[0],r[1]),t.fillStyle=e.color||"white",t.fillText(n,e.x,e.y)),e.__bckgDimensions=r}var St=a(101),Tt=a(180),Lt=a(73),Et=a(579),Pt=a(557),_t=a(571),Mt=a(10),Ft=a(138),Wt=a.n(Ft);function zt(){var e=ae();return Object(ie.jsxs)(le.a,{container:!0,spacing:2,className:e.mainGrid,direction:"row-reverse",children:[Object(ie.jsx)(le.a,{item:!0,xs:12,sm:12,md:6,children:Object(ie.jsx)(de.a,{variant:"outlined",className:e.paper,children:Object(ie.jsxs)("div",{children:[Object(ie.jsx)("h2",{children:"Structure Visualisation"}),Object(ie.jsx)("p",{children:"This will eventually be our structure visualiser (coupled with the Optimade Client)."})]})})}),Object(ie.jsx)(le.a,{item:!0,xs:12,sm:12,md:6,children:Object(ie.jsx)(de.a,{variant:"outlined",className:e.paper,children:Object(ie.jsx)(Bt,{})})})]})}function Bt(){var e=Object(n.useContext)(B),t=xt("aiida-structure-uuid",null),a=Object(l.a)(t,2),r=a[0],c=a[1],s=Object(T.a)([e.baseUrl,"node",r],(function(){return Y(e.baseUrl,r)}),{enabled:null!==e.baseUrl}),o=null;return s.data&&(s.data.attributes.cell?o=s.data:console.error("Data is not from StructureData")),Object(ie.jsxs)(i.a.Fragment,{children:[Object(ie.jsx)(x.a,{label:"StructureData UUID",value:r||"",onChange:function(e){c(e.target.value)},error:!!r&&!z.test(r),fullWidth:!0}),Object(ie.jsxs)(Lt.a,{children:[Object(ie.jsx)(Et.a,{enableZoom:!0,enableRotate:!0}),Object(ie.jsx)("ambientLight",{}),Object(ie.jsx)("pointLight",{position:[10,10,10]}),Object(ie.jsx)(Pt.a,{alignTop:!1,children:o?Object(ie.jsx)(Gt,{data:o}):null})]}),o?Object(ie.jsxs)(p.a,{gutterBottom:!0,align:"right",children:["X: ",Ht(o.attributes.cell[0]),"; Y: ",Ht(o.attributes.cell[0]),"; Z: ",Ht(o.attributes.cell[0])]}):null,o?Object(ie.jsx)(Xt,{data:o}):null]})}function Ht(e){return Object(St.a)(Mt.Vector3,Object(yt.a)(e)).length().toFixed(2)}function Jt(e){var t=e.position,a=e.radius,i=void 0===a?1:a,r=e.color,c=void 0===r?"blue":r,s=e.opacity,o=void 0===s?.9:s,l=Object(n.useRef)();return Object(ie.jsxs)("mesh",{ref:l,position:t,children:[Object(ie.jsx)("sphereBufferGeometry",{args:[i,30,30]}),Object(ie.jsx)("meshLambertMaterial",{color:c,transparent:!0,opacity:o})]})}function Gt(e){var t=e.data,a=t.attributes.sites;return Object(ie.jsxs)(i.a.Fragment,{children:[Object(ie.jsx)(_t.a,{points:[[0,0,0],t.attributes.cell[0]],color:"black",lineWidth:1,dashed:!0}),Object(ie.jsx)(_t.a,{points:[[0,0,0],t.attributes.cell[1]],color:"black",lineWidth:1,dashed:!0}),Object(ie.jsx)(_t.a,{points:[[0,0,0],t.attributes.cell[2]],color:"black",lineWidth:1,dashed:!0}),a.map((function(e){return Object(ie.jsx)(Jt,{position:e.position,radius:Wt()(qt,e.kind_name,[1])[0],color:Yt(e.kind_name),opacity:.9})}))]})}function Yt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=Object(St.a)(Mt.Color,Object(yt.a)(Wt()(qt,e,[1,0,1,0]).slice(1,4)));return t?"rgb(".concat(255*a.r,",").concat(255*a.g,",").concat(255*a.b,")"):a}function Xt(e){var t=e.data,a=Object(u.a)(),n=[{field:"kind",headerName:"Kind",width:120,renderCell:function(e){var t=Yt("".concat(e.value),!0);return Object(ie.jsx)(Ce.a,{style:{backgroundColor:t,color:a.palette.getContrastText(t)},children:e.value})}},{field:"x",headerName:"X",type:"number"},{field:"y",headerName:"Y",type:"number"},{field:"z",headerName:"Z",type:"number"}],i=t.attributes.sites.map((function(e,t){return{id:t,kind:e.kind_name,x:e.position[0],y:e.position[0],z:e.position[0]}}));return Object(ie.jsx)("div",{style:{width:"100%"},children:Object(ie.jsx)(Tt.a,{autoHeight:!0,rows:i,columns:n})})}var qt={XX:[.8,.3,.3,.3],H:[.46,1,.8,.8],He:[1.22,.98907,.91312,.81091],Li:[1.57,.52731,.87953,.4567],Be:[1.12,.37147,.8459,.48292],B:[.81,.1249,.63612,.05948],C:[.77,.5043,.28659,.16236],N:[.74,.69139,.72934,.9028],O:[.74,.99997,.01328,0],F:[.72,.69139,.72934,.9028],Ne:[1.6,.99954,.21788,.71035],Na:[1.91,.97955,.86618,.23787],Mg:[1.6,.98773,.48452,.0847],Al:[1.43,.50718,.70056,.84062],Si:[1.18,.10596,.23226,.98096],P:[1.1,.75557,.61256,.76425],S:[1.04,1,.98071,0],Cl:[.99,.19583,.98828,.01167],Ar:[1.92,.81349,.99731,.77075],K:[2.35,.63255,.13281,.96858],Ca:[1.97,.35642,.58863,.74498],Sc:[1.64,.71209,.3893,.67279],Ti:[1.47,.47237,.79393,1],V:[1.35,.9,.1,0],Cr:[1.29,0,0,.62],Mn:[1.37,.66148,.03412,.62036],Fe:[1.26,.71051,.44662,.00136],Co:[1.25,0,0,.68666],Ni:[1.25,.72032,.73631,.74339],Cu:[1.28,.1339,.28022,.86606],Zn:[1.37,.56123,.56445,.50799],Ga:[1.53,.62292,.89293,.45486],Ge:[1.22,.49557,.43499,.65193],As:[1.21,.45814,.81694,.34249],Se:[1.04,.6042,.93874,.06122],Br:[1.14,.49645,.19333,.01076],Kr:[1.98,.98102,.75805,.95413],Rb:[2.5,1,0,.6],Sr:[2.15,0,1,.15259],Y:[1.82,.40259,.59739,.55813],Zr:[1.6,0,1,0],Nb:[1.47,.29992,.70007,.46459],Mo:[1.4,.70584,.52602,.68925],Tc:[1.35,.80574,.68699,.79478],Ru:[1.34,.81184,.72113,.68089],Rh:[1.34,.80748,.82205,.67068],Pd:[1.37,.75978,.76818,.72454],Ag:[1.44,.72032,.73631,.74339],Cd:[1.52,.95145,.12102,.86354],In:[1.67,.84378,.50401,.73483],Sn:[1.58,.60764,.56052,.72926],Sb:[1.41,.84627,.51498,.31315],Te:[1.37,.67958,.63586,.32038],I:[1.33,.55914,.122,.54453],Xe:[2.18,.60662,.63218,.97305],Cs:[2.72,.05872,.99922,.72578],Ba:[2.24,.11835,.93959,.17565],La:[1.88,.3534,.77057,.28737],Ce:[1.82,.82055,.99071,.02374],Pr:[1.82,.9913,.88559,.02315],Nd:[1.82,.98701,.5556,.02744],Pm:[1.81,0,0,.96],Sm:[1.81,.99042,.02403,.49195],Eu:[2.06,.98367,.03078,.83615],Gd:[1.79,.75325,.01445,1],Tb:[1.77,.44315,.01663,.99782],Dy:[1.77,.1939,.02374,.99071],Ho:[1.76,.02837,.25876,.98608],Er:[1.75,.28688,.45071,.23043],Tm:[1,0,0,.88],Yb:[1.94,.15323,.99165,.95836],Lu:[1.72,.15097,.99391,.71032],Hf:[1.59,.70704,.70552,.3509],Ta:[1.47,.71952,.60694,.33841],W:[1.41,.55616,.54257,.50178],Re:[1.37,.70294,.69401,.55789],Os:[1.35,.78703,.69512,.47379],Ir:[1.36,.78975,.81033,.45049],Pt:[1.39,.79997,.77511,.75068],Au:[1.44,.99628,.70149,.22106],Hg:[1.55,.8294,.72125,.79823],Tl:[1.71,.58798,.53854,.42649],Pb:[1.75,.32386,.32592,.35729],Bi:[1.82,.82428,.18732,.97211],Po:[1.77,0,0,1],At:[.62,0,0,1],Rn:[.8,1,1,0],Fr:[1,0,0,0],Ra:[2.35,.42959,.66659,.34786],Ac:[2.03,.39344,.62101,.45034],Th:[1.8,.14893,.99596,.47106],Pa:[1.63,.16101,.98387,.20855],U:[1.56,.47774,.63362,.66714],Np:[1.56,.3,.3,.3],Pu:[1.64,.3,.3,.3],Am:[1.73,.3,.3,.3]};function Vt(e){var t=e.icon,a=e.primary,n=e.to,r=Object(R.g)(),c=i.a.useMemo((function(){return i.a.forwardRef((function(e,t){return Object(ie.jsx)(s.b,Object(d.a)({to:n,ref:t},e))}))}),[n]);return Object(ie.jsx)("li",{children:Object(ie.jsxs)(g.a,{button:!0,component:c,selected:n===r.pathname,children:[t?Object(ie.jsx)(v.a,{children:t}):null,Object(ie.jsx)(y.a,{primary:a})]})})}function Zt(e){var t,a,n=e.showDevTools,r=void 0===n||n,c=ae(),s=Object(u.a)(),d=i.a.useState(!1),g=Object(l.a)(d,2),v=g[0],y=g[1],C=xt("react-aiida-rest-url",F),N=Object(l.a)(C,2),T=N[0],E=N[1];return Object(ie.jsx)("div",{className:c.root,children:Object(ie.jsxs)(S.a,{client:M,children:[Object(ie.jsx)(b.a,{position:"sticky",className:Object(j.a)(c.appBar,Object(o.a)({},c.appBarShift,v)),children:Object(ie.jsxs)(h.a,{children:[Object(ie.jsx)(O.a,{edge:"start",onClick:function(){y(!0)},className:Object(j.a)(c.menuButton,Object(o.a)({},c.hide,v)),color:"inherit","aria-label":"open drawer",children:Object(ie.jsx)(k.a,{})}),Object(ie.jsx)(p.a,{variant:"h6",className:c.title,id:"app-header",children:"AiiDA Dashboard"}),Object(ie.jsx)($t,{url:W.test(T)?T:null,className:c.inputRestUrlIcon}),Object(ie.jsx)(x.a,{id:"rest-url",className:c.inputRestUrl,label:"REST URL",value:T,error:!W.test(T),helperText:W.test(T)?void 0:"Invalid URL",onChange:function(e){E(e.target.value)},autoComplete:F,InputProps:{className:c.inputRestUrlText}}),Object(ie.jsx)(re,{width:40,height:40})]})}),Object(ie.jsxs)(f.a,{variant:"permanent",className:Object(j.a)(c.drawer,(t={},Object(o.a)(t,c.drawerOpen,v),Object(o.a)(t,c.drawerClose,!v),t)),classes:{paper:Object(j.a)((a={},Object(o.a)(a,c.drawerOpen,v),Object(o.a)(a,c.drawerClose,!v),a))},children:[Object(ie.jsx)("div",{className:c.toolbar,children:Object(ie.jsx)(O.a,{onClick:function(){y(!1)},children:"rtl"===s.direction?Object(ie.jsx)(U.a,{}):Object(ie.jsx)(D.a,{})})}),Object(ie.jsx)(w.a,{}),Object(ie.jsxs)(m.a,{children:[Object(ie.jsx)(Vt,{to:"/",primary:"Home",icon:Object(ie.jsx)(I.a,{})}),Object(ie.jsx)(Vt,{to:"/nodes",primary:"Node Explorer",icon:Object(ie.jsx)(A.a,{})}),Object(ie.jsx)(Vt,{to:"/graph",primary:"Provenance Graph",icon:Object(ie.jsx)(se,{})}),Object(ie.jsx)(Vt,{to:"/structures",primary:"Structure Explorer",icon:Object(ie.jsx)(oe,{})})]})]}),Object(ie.jsx)(B.Provider,{value:{baseUrl:W.test(T)?T:null},children:Object(ie.jsxs)(R.d,{children:[Object(ie.jsx)(R.b,{exact:!0,path:"/",component:be}),Object(ie.jsx)(R.b,{path:"/nodes",component:Ot}),Object(ie.jsx)(R.b,{path:"/graph",component:It}),Object(ie.jsx)(R.b,{path:"/structures",component:zt}),Object(ie.jsx)(R.b,{path:"/404",component:Kt}),Object(ie.jsx)(R.a,{to:"/404"})]})}),r?Object(ie.jsx)(L.ReactQueryDevtools,{initialIsOpen:!1}):null]})})}function Kt(){return Object(ie.jsxs)("div",{children:[Object(ie.jsx)("h1",{children:"404 - Not Found!"}),Object(ie.jsx)(s.b,{to:"/",children:"Go Home"})]})}function $t(e){var t=e.url,a=e.className,n=void 0===a?void 0:a;return Object(T.a)([t,"connected"],(function(){return function(e){return H.apply(this,arguments)}(t)})).data?Object(ie.jsx)(C.a,{className:n}):Object(ie.jsx)(N.a,{color:"error",className:n})}var Qt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,582)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),n(e),i(e),r(e),c(e)}))};c.a.render(Object(ie.jsx)(i.a.StrictMode,{children:Object(ie.jsx)(s.a,{children:Object(ie.jsx)(Zt,{})})}),document.getElementById("root")),Qt()}},[[467,1,2]]]);
//# sourceMappingURL=main.02526ca7.chunk.js.map